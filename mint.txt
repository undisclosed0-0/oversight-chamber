<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Prestige Vault</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Georgia&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">

  <style>
    body {
      background: radial-gradient(circle at top center, #f8f5f0 0%, #3b2f2f 100%);
      font-family: 'Georgia', serif;
      padding: 40px;
      color: #2f2520;
    }
   h1 {
  font-family: 'Cinzel Decorative', serif;
  font-size: 2.2em;
  color: #2f2520;
  letter-spacing: 2px;
  text-align: center;   /* centers the header */
}


    hr { border: none; height: 2px; background: linear-gradient(to right, #a88947, #c2a76d, #d8b86a); margin: 20px auto 30px; max-width: 400px; }

    /* HUD */
    #dashboard { background: linear-gradient(to right, #d8b86a, #c2a76d, #a88947); padding: 12px 16px; border-bottom: 3px solid #a88947; box-shadow: 0 4px 12px rgba(0,0,0,0.2); margin-bottom: 24px; }
    #dashboard .hud { display: grid; grid-template-columns: 1fr 1fr auto; align-items: center; gap: 12px; font-weight: bold; font-size: 16px; }
    .hud-section { display: flex; align-items: center; gap: 8px; }
    .hud-selected { justify-self: end; max-width: 340px; }

    .hud-button {
      background: linear-gradient(to right, #d8b86a, #c2a76d, #a88947);
      color: #2f2520; font-weight: bold; font-size: 14px;
      border: 2px solid #a88947; border-radius: 10px;
      padding: 8px 16px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2), inset 0 0 6px rgba(255,255,255,0.3);
      cursor: pointer; text-decoration: none;
      transition: transform 0.2s, box-shadow 0.3s;
    }
    .hud-button:hover { transform: scale(1.05); box-shadow: 0 0 12px rgba(194,167,109,0.6), inset 0 0 8px rgba(255,255,255,0.4); }

    /* Proceed button floats globally */
    .proceed-btn { position: fixed; bottom: 16px; right: 16px; z-index: 1200; }

    /* Scroll Log */
    #scrollLog { max-height: 45px; overflow: hidden; cursor: pointer; border-left: 2px solid #a88947; padding-left: 10px; }
    #scrollLog:hover { max-height: 300px; overflow-y: auto; }
    #scrollLog::before { content: "üìú Selected Tokens (hover to expand)"; display: block; font-weight: bold; color: #2f2520; background: linear-gradient(to right, #d8b86a, #c2a76d, #a88947); border-bottom: 1px dashed #a88947; padding: 4px; margin-bottom: 6px; border-radius: 6px; }
    #logList { list-style: none; padding: 0; margin: 0; }
    #logList li { padding: 6px 0; margin-bottom: 6px; color: #2f2520; line-height: 1.4; border-bottom: 1px dashed #a88947; }
    .clear-btn { margin-top: 8px; background: #2f2520; color: #fefcea; border: none; padding: 6px 12px; border-radius: 6px; font-size: 13px; cursor: pointer; }

    /* Card Flip */
    .token-display { display: flex; justify-content: center; margin-top: 16px; }
    .card { perspective: 1000px; }
    .card-inner { position: relative; width: 320px; height: 360px; transition: transform 0.8s; transform-style: preserve-3d; }
    .card-front, .card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 20px; display: flex; align-items: center; justify-content: center; }
    .card-front { background: transparent; flex-direction: column; }
    .card-back {
      transform: rotateY(180deg);
      flex-direction: column; position: relative;
      width: 300px; height: 180px; border-radius: 20px;
      background: radial-gradient(circle at center, #fefcea, #d4af37);
      border: 6px solid #c2a76d;
      box-shadow: inset 0 0 12px #fff3b0, 0 0 24px rgba(194,167,109,0.6), 0 12px 24px rgba(60,42,93,0.3);
      padding: 24px;
    }
    .card.flipped .card-inner { transform: rotateY(180deg); }

    /* Coin */
    .token-coin { margin-top: -160px; width: 180px; height: 180px; border-radius: 50%; background: radial-gradient(circle at center, #fefcea, #d4af37); border: 6px solid #c2a76d; display: flex; align-items: center; justify-content: center; flex-direction: column; animation: floatCoin 4s ease-in-out infinite; }
    @keyframes floatCoin { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }

    .crest-core { width: 100px; height: 100px; border-radius: 50%; background: radial-gradient(circle at center, #3b2f2f, #2f2520); border: 4px solid #a88947; display: flex; align-items: center; justify-content: center; }
    .crest-text { font-size: 14px; color: #c2a76d; text-transform: uppercase; letter-spacing: 1px; }
    .denomination { margin-top: 10px; font-size: 18px; font-weight: bold; }

    /* Back face contents */
    #qrCanvas { width: 120px; height: 120px; border: 3px solid #a88947; border-radius: 12px; background: radial-gradient(circle at center, #fefcea, #e0e0e0); }
    .qr-info { font-size: 14px; font-weight: bold; text-align: center; margin-top: 8px; }
    .select-btn { margin-top: 10px; }
    .watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 32px; color: rgba(0,0,0,0.03); font-weight: bold; }

    /* Vault Summary */
    #vaultSummary { display: none; position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%); background: #fffbe6; border: 4px solid #a88947; border-radius: 16px; padding: 24px; box-shadow: 0 0 30px rgba(194,167,109,0.4); z-index: 1000; opacity: 0.9; }

    /* Crest divider under header */
.crest-divider {
  height: 4px;
  width: 60%;
  margin: 12px auto 24px;
  border-radius: 4px;
  background: linear-gradient(to right, #a88947, #ffd700, #a88947);
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.7);
}
.original-divider {
  height: 2px;
  width: 60%;
  margin: 20px auto 40px;
  background: linear-gradient(to right, transparent, #a88947 40%, #c2a76d 60%, transparent);
  position: relative;
}
 .original-divider::before,
.original-divider::after {
  content: "";
  position: absolute;
  top: -4px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #c2a76d;
  box-shadow: 0 0 6px rgba(194,167,109,0.8);
}
.original-divider::before { left: 0; }
.original-divider::after { right: 0; }   

   
 
    /* New Divider */
.ceremonial-divider {
  display: flex;
  justify-content: space-between; /* spans full width */
  align-items: flex-end;
  margin: 24px 0 40px;
  width: 100%;   /* full screen */
  padding: 0 5%; /* optional side breathing room */
}

.ceremonial-divider span {
  flex: 1;
  margin: 0 2px;
  background: linear-gradient(to top, #a88947, #ffd700);
  border-radius: 2px;
  box-shadow: 0 0 6px rgba(194,167,109,0.6);
}

/* Heights taper from center outward */
.ceremonial-divider span:nth-child(10) { height: 40px; }
.ceremonial-divider span:nth-child(9),
.ceremonial-divider span:nth-child(11) { height: 34px; }
.ceremonial-divider span:nth-child(8),
.ceremonial-divider span:nth-child(12) { height: 28px; }
.ceremonial-divider span:nth-child(7),
.ceremonial-divider span:nth-child(13) { height: 22px; }
.ceremonial-divider span:nth-child(6),
.ceremonial-divider span:nth-child(14) { height: 16px; }
.ceremonial-divider span:nth-child(5),
.ceremonial-divider span:nth-child(15) { height: 12px; }
.ceremonial-divider span:nth-child(4),
.ceremonial-divider span:nth-child(16) { height: 8px; }
.ceremonial-divider span:nth-child(3),
.ceremonial-divider span:nth-child(17) { height: 6px; }
.ceremonial-divider span:nth-child(2),
.ceremonial-divider span:nth-child(18) { height: 4px; }
.ceremonial-divider span:nth-child(1),
.ceremonial-divider span:nth-child(19) { height: 2px; }


    /* New Divider v2 */

    
     /* New optical */

@keyframes shimmer {
  0%   { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Header emoji styling */
.header-emoji {
  font-size: 2.5em;
  text-shadow: 1px 1px 2px #5a4520, 0 0 8px gold;
}

/* Coin with fantasy orbit */
.token-coin {
  position: relative;
  animation: floatCoin 4s ease-in-out infinite;
  overflow: visible;
}

/* Base particle style */
.token-coin .particle {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: radial-gradient(circle, gold, transparent);
  opacity: 0.8;
  filter: blur(0.5px);
}
.token-coin .particle {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: radial-gradient(circle, gold, transparent);
  box-shadow: 0 0 8px rgba(255, 215, 0, 0.6), 0 0 16px rgba(255, 215, 0, 0.3);
  opacity: 0.8;
  filter: blur(0.5px);
}
    /* Ambient Shimmer Pulses */
.token-coin .shimmer {
  animation: shimmerPulse 3s ease-in-out infinite;
}

@keyframes shimmerPulse {
  0%, 100% { opacity: 0.6; transform: scale(1); }
  50%      { opacity: 1; transform: scale(1.3); }
}

/* Particle zones: start outside the coin */
.token-coin .particle.p1 { top: -20px; left: 50%; animation: freeOrbit1 6s ease-in-out infinite; }
.token-coin .particle.p2 { top: 50%; left: -20px; animation: freeOrbit2 8s ease-in-out infinite; }
.token-coin .particle.p3 { bottom: -20px; left: 60%; animation: freeOrbit3 7s ease-in-out infinite; }
.token-coin .particle.p4 { top: 60%; right: -20px; animation: freeOrbit4 9s ease-in-out infinite; }

/* Freeform orbit keyframes */
@keyframes freeOrbit1 {
  0%   { transform: translate(0px, 0px) scale(1); opacity: 0.8; }
  25%  { transform: translate(15px, 10px) scale(1.2); opacity: 1; }
  50%  { transform: translate(-10px, 20px) scale(0.9); opacity: 0.6; }
  75%  { transform: translate(20px, -15px) scale(1.1); opacity: 0.9; }
  100% { transform: translate(0px, 0px) scale(1); opacity: 0.8; }
}

@keyframes freeOrbit2 {
  0%   { transform: translate(0px, 0px); opacity: 0.7; }
  30%  { transform: translate(-15px, 25px); opacity: 1; }
  60%  { transform: translate(10px, -20px); opacity: 0.5; }
  100% { transform: translate(0px, 0px); opacity: 0.7; }
}

@keyframes freeOrbit3 {
  0%   { transform: translate(0px, 0px); opacity: 0.6; }
  40%  { transform: translate(25px, -15px); opacity: 1; }
  80%  { transform: translate(-20px, 10px); opacity: 0.4; }
  100% { transform: translate(0px, 0px); opacity: 0.6; }
}

@keyframes freeOrbit4 {
  0%   { transform: translate(0px, 0px); opacity: 0.9; }
  20%  { transform: translate(-30px, -10px); opacity: 1; }
  50%  { transform: translate(15px, 25px); opacity: 0.5; }
  100% { transform: translate(0px, 0px); opacity: 0.9; }
}
.token-coin .particle.p5 {
  transform-origin: 90px center;
  animation: orbit 10s linear infinite;
}

.token-coin .particle.p6 {
  transform-origin: 90px center;
  animation: orbit 12s linear infinite;
  animation-delay: 1.5s;
}
    .token-coin .particle.p7 {
  transform-origin: 90px center;
  animation: orbit 4s linear infinite;
}

.token-coin .particle.p8 {
  transform-origin: 90px center;
  animation: orbit 5s linear infinite;
  animation-delay: 1s;
}
    /* Fifth Orb That Pulses */
    .token-coin .pulse-orb {
  position: absolute;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: radial-gradient(circle, #ffd700, transparent);
  top: 50%;
  left: 50%;
  margin: -6px 0 0 -6px;
  opacity: 0;
  animation: pulseOrb 1.2s ease-out forwards;
}

@keyframes pulseOrb {
  0%   { transform: scale(0.5); opacity: 0; }
  50%  { transform: scale(1.5); opacity: 1; }
  100% { transform: scale(1); opacity: 0.6; }
}
    /* Half Tokens ‚Üí Color A Glow
üü® Final Token ‚Üí Joyous Celebration + Sound Cue */
 body.half-glow {
  background: radial-gradient(circle at center, rgba(173,216,230,0.1), transparent 70%);
  transition: background 0.5s ease-in-out;
}

body.full-celebration {
  animation: vaultAwakening 2.5s ease-in-out;
  background: radial-gradient(circle at center, rgba(255,215,0,0.2), transparent 70%);
}

@keyframes vaultAwakening {
  0%   { transform: scale(1); filter: brightness(1); }
  25%  { transform: scale(1.02); filter: brightness(1.3); }
  50%  { transform: scale(0.98); filter: brightness(1.5); }
  75%  { transform: scale(1.01); filter: brightness(1.2); }
  100% { transform: scale(1); filter: brightness(1); }
}
  /* ‚ÄúVault Awakened‚Äù */ 
    #vaultMessage {
  position: fixed;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(255, 215, 0, 0.85);
  color: #2f2520;
  font-family: 'Cinzel Decorative', serif;
  font-size: 2em;
  padding: 20px 40px;
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
  z-index: 3000;
  opacity: 0;
  transition: opacity 0.6s ease-in-out;
}

    /* Prestige Half-Awakening */
    body.half-glow {
  animation: prestigeHalfAwaken 4s ease-in-out forwards;
  background: radial-gradient(circle at center, rgba(255, 223, 100, 0.12), rgba(255, 215, 0, 0.06), transparent 80%);
  backdrop-filter: blur(1.5px);
}

@keyframes prestigeHalfAwaken {
  0% {
    transform: scale(1);
    filter: brightness(1);
    box-shadow: inset 0 0 0px rgba(255, 215, 0, 0);
  }
  25% {
    transform: scale(1.01);
    filter: brightness(1.15);
    box-shadow: inset 0 0 60px rgba(255, 215, 0, 0.15);
  }
  50% {
    transform: scale(1.015);
    filter: brightness(1.25);
    box-shadow: inset 0 0 100px rgba(255, 215, 0, 0.25);
  }
  75% {
    transform: scale(1.01);
    filter: brightness(1.15);
    box-shadow: inset 0 0 60px rgba(255, 215, 0, 0.15);
  }
  100% {
    transform: scale(1);
    filter: brightness(1);
    box-shadow: inset 0 0 0px rgba(255, 215, 0, 0);
  }
}

    /* Halfway Prestige Glow */
body.half-glow {
  animation: prestigeHalfAwaken 4s ease-in-out forwards;
  background: radial-gradient(circle at center, rgba(255, 223, 100, 0.12), rgba(255, 215, 0, 0.06), transparent 80%);
  backdrop-filter: blur(1.5px);
}

@keyframes prestigeHalfAwaken {
  0%   { transform: scale(1); filter: brightness(1); box-shadow: inset 0 0 0px rgba(255, 215, 0, 0); }
  25%  { transform: scale(1.01); filter: brightness(1.15); box-shadow: inset 0 0 60px rgba(255, 215, 0, 0.15); }
  50%  { transform: scale(1.015); filter: brightness(1.25); box-shadow: inset 0 0 100px rgba(255, 215, 0, 0.25); }
  75%  { transform: scale(1.01); filter: brightness(1.15); box-shadow: inset 0 0 60px rgba(255, 215, 0, 0.15); }
  100% { transform: scale(1); filter: brightness(1); box-shadow: inset 0 0 0px rgba(255, 215, 0, 0); }
}

/* Floating Golden Particles */
.particle-float {
  position: fixed;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: radial-gradient(circle, gold, transparent);
  animation: floatParticle 12s linear infinite;
  pointer-events: none;
  z-index: 1500;
  opacity: 0.6;
  filter: blur(1px);
}

@keyframes floatParticle {
  0%   { transform: translateY(0) scale(1); opacity: 0.6; }
  50%  { transform: translateY(-100vh) scale(1.2); opacity: 0.3; }
  100% { transform: translateY(-100vh) scale(1); opacity: 0; }
}

/* Fade-in Crest Seal */
#crestSeal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: 'Cinzel Decorative', serif;
  font-size: 3em;
  color: gold;
  text-shadow: 0 0 12px rgba(255, 215, 0, 0.6);
  opacity: 0;
  transition: opacity 1s ease-in-out;
  z-index: 2000;
}

/* Fade-in Ceremony Phrase */
#ceremonyPhrase {
  position: fixed;
  bottom: 10%;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Georgia', serif;
  font-size: 1.8em;
  color: #c2a76d;
  background: rgba(255, 255, 240, 0.85);
  padding: 12px 24px;
  border-radius: 8px;
  box-shadow: 0 0 16px rgba(194, 167, 109, 0.4);
  opacity: 0;
  transition: opacity 1s ease-in-out;
  z-index: 2000;
}

/* #vaultShimmer */
#vaultShimmer {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 2000;
  opacity: 0;
  transition: opacity 0.4s ease-out;
}

#vaultShimmer.half {
  background: radial-gradient(circle at center, rgba(173,216,230,0.2), transparent 70%); /* soft blue glow */
  animation: shimmerHalf 2s ease-out forwards;
}

#vaultShimmer.full {
  background: radial-gradient(circle at center, rgba(255,215,0,0.3), transparent 70%); /* golden pulse */
  animation: shimmerFull 2s ease-out forwards;
}

@keyframes shimmerHalf {
  0%   { opacity: 0; transform: scale(0.9); }
  50%  { opacity: 0.4; transform: scale(1.05); }
  100% { opacity: 0; transform: scale(1); }
}

@keyframes shimmerFull {
  0%   { opacity: 0; transform: scale(0.8); }
  50%  { opacity: 0.6; transform: scale(1.1); }
  100% { opacity: 0; transform: scale(1); }
}

#scrollLog.glow {
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.6);
  transition: box-shadow 0.4s ease-in-out;
}
.crest-core.pulse {
  animation: crestPulse 1.2s ease-out;
}

@keyframes crestPulse {
  0%   { transform: scale(1); box-shadow: 0 0 0px gold; }
  50%  { transform: scale(1.2); box-shadow: 0 0 12px gold; }
  100% { transform: scale(1); box-shadow: 0 0 0px gold; }
}/* Prestige Crest Burst*/
.crest-core.burst {
  animation: crestBurst 1.2s ease-out;
}

@keyframes crestBurst {
  0%   { transform: scale(1); box-shadow: 0 0 0px gold; }
  50%  { transform: scale(1.4); box-shadow: 0 0 24px gold; }
  100% { transform: scale(1); box-shadow: 0 0 0px gold; }
}

    /* Mobile fixes */
    @media (max-width: 768px) and (orientation: portrait) {
      #dashboard .hud { grid-template-columns: 1fr; }
      .hud-selected { justify-self: start; max-width: 100%; width: 100%; }
      #scrollLog { border-left: none; border-top: 2px solid #a88947; margin-top: 8px; padding-left: 0; }
      
    @media (max-width: 768px) and (orientation: portrait) {
  .card-inner {
    width: 90vw;
    max-width: 320px;
    height: 360px;   /* keep fixed height */
  }
  .card-back {
    width: 90%;
    max-width: 280px;
    margin: 0 auto;
    padding: 16px;
  }
  #qrCanvas {
    width: 40vw;
    max-width: 160px;
    height: auto;
  }
}
@media (max-width: 768px) {
  h1 {
    font-size: 1.6em;
    letter-spacing: 1px;
  }
  .header-emoji {
    font-size: 2em;
  }
}
@media (max-width: 768px) {
  h1 {
    font-size: 1.4em;
    letter-spacing: 1px;
  }
  .header-emoji {
    font-size: 1.8em;
  }
}


  </style>
</head>
<body>
  <h1>Prestige <span class="header-emoji">üèõÔ∏è</span> Vault</h1>

<!--<div class="ceremonial-divider">
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
</div>
-->

<div class="original-divider"></div>
  <!--<div class="crest-divider"></div>-->
 

  <div id="dashboard">
    <div class="hud">
      <div class="hud-section">ü™ô Tokens: <span id="hudCount">0</span></div>
      <div class="hud-section">üéë Total Prestige: <span id="hudTotal">0.00</span></div>
      <div class="hud-section hud-selected">
        <div id="scrollLog">
          <ul id="logList"></ul>
          <button id="clearLedger" class="clear-btn">‚òë Archive & Reset</button>
        </div>
      </div>
    </div>
    <!-- Proceed to Ritual -->
    <a id="hudLink" href="#" target="_blank" class="hud-button proceed-btn">üîó Proceed to Ritual</a>
  </div>

  <!-- Token Selector -->
  <label for="denominationSelect">‚öñÔ∏è Choose Token:</label><br>
  <select id="denominationSelect" class="hud-button" style="margin-top: 6px;">
    <option value="">--</option>
    <option value="0.01">0.01 Prestige</option>
    <option value="0.10">0.10 Prestige</option>
    <option value="0.25">0.25 Prestige</option>
    <option value="1.00">1.00 Prestige</option>
    <option value="5.00">5.00 Prestige</option>
    <option value="10.00">10.00 Prestige</option>
    <option value="20.00">20.00 Prestige</option>
    <option value="50.00">50.00 Prestige</option>
    <option value="100.00">100.00 Prestige</option>
  </select>

  <!-- Coin + Card Flip centerpiece -->
  <div class="token-display" id="tokenDisplay">
    <div class="card">
      <div class="card-inner">
        <!-- Front face: Coin -->
        <div class="card-front">
          <div class="token-coin">
            <span class="particle p1"></span>
<span class="particle p2"></span>
<span class="particle p3 shimmer"></span>
<span class="particle p4"></span>
<span class="particle p5"></span>
<span class="particle p6 shimmer"></span>
<span class="particle p7"></span>
<span class="particle p8"></span>


            <div class="crest-core">
              <div class="crest-text">Prestige</div>
            </div>
            <div class="denomination" id="displayDenomination">--</div>
          </div>
        </div>
        <!-- Back face: Golden QR slab -->
        <div class="card-back">
          <canvas id="qrCanvas" width="120" height="120"></canvas>
          <div class="qr-info" id="qrInfo">Serial: --<br>Issued: --</div>
          <button id="selectBtn" class="select-btn" disabled>Select</button>
          <div class="watermark">Prestige</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Vault Summary -->
  <div id="vaultSummary">
    <h3 style="margin-top:0;">üèõÔ∏è Vault Summary</h3>
    <p id="summaryText" style="font-size:14px; color:#2f2520;"></p>
    <button onclick="document.getElementById('vaultSummary').style.display='none'" class="clear-btn">Close</button>
  </div>

<audio id="ceremonialSound" src="" preload="auto"></audio>
<div id="vaultShimmer" style="display:none;"></div>
<div id="vaultMessage">Vault Awakened</div>
<audio id="chantSound" src="chant.mp3" preload="auto"></audio>
<div id="crestSeal">üõ°Ô∏è</div>
<div id="ceremonyPhrase">Ceremony Rising‚Ä¶</div>

};

  <!-- QR library -->
  <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
  <script>window.onload = () => {
  // your entire script here
const displayDenomination = document.getElementById('displayDenomination');
const qrInfo = document.getElementById('qrInfo');
const hudCount = document.getElementById('hudCount');
const hudTotal = document.getElementById('hudTotal');
const hudLink = document.getElementById('hudLink');
const qrCanvas = document.getElementById('qrCanvas');
const selectBtn = document.getElementById('selectBtn');
const logList = document.getElementById('logList');
const tokenDisplay = document.getElementById('tokenDisplay');
const denominationSelect = document.getElementById('denominationSelect');
const clearLedger = document.getElementById('clearLedger');
const vaultSummary = document.getElementById('vaultSummary');
const summaryText = document.getElementById('summaryText');
const vaultMessage = document.getElementById('vaultMessage');
const ceremonialSound = document.getElementById('ceremonialSound');
const chantSound = document.getElementById('chantSound');
const scrollLog = document.getElementById('scrollLog');
const crest = document.querySelector('.crest-core');
const coin = document.querySelector('.token-coin');
const shimmer = document.getElementById('vaultShimmer');
const crestSeal = document.getElementById('crestSeal');
const ceremonyPhrase = document.getElementById('ceremonyPhrase');

let selected = [];
let total = 0;
const totalTokens = 9;
let halfwayTriggered = false;
let currentPayload = null;

denominationSelect.onchange = (e) => {
  const value = parseFloat(e.target.value);
  if (!isNaN(value)) showToken(value);
};

clearLedger.onclick = () => {
  logList.innerHTML = '';
  selected = [];
  total = 0;
  halfwayTriggered = false;
  currentPayload = null;
  hudCount.textContent = '0';
  hudTotal.textContent = '0.00';
  hudLink.href = '#';
  vaultSummary.style.display = 'none';
  selectBtn.disabled = true;
  selectBtn.textContent = 'Select';
  displayDenomination.textContent = '--';
  qrInfo.innerHTML = 'Serial: --<br>Issued: --';
  coin.classList.remove('rarity-bronze','rarity-silver','rarity-gold');
};

function showToken(value) {
  const serial = `PRG-${value.toFixed(2)}-${Date.now()}`;
  const issued = new Date().toISOString().split('T')[0];
  currentPayload = {
    denomination: value.toFixed(2),
    currency: "Prestige",
    serial: serial,
    issued: issued,
    redeem_url: `https://prestige.exchange/redeem/${serial}`
  };

  coin.classList.remove('rarity-bronze','rarity-silver','rarity-gold');
  if (value >= 20.00) coin.classList.add('rarity-gold');
  else if (value >= 1.00) coin.classList.add('rarity-silver');
  else coin.classList.add('rarity-bronze');

  displayDenomination.textContent = currentPayload.denomination;
  qrInfo.innerHTML = `Serial: ${currentPayload.serial}<br>Issued: ${currentPayload.issued}`;
  new QRious({ element: qrCanvas, value: JSON.stringify(currentPayload), size: 120 });

  tokenDisplay.style.display = 'flex';
  selectBtn.disabled = false;
  selectBtn.textContent = 'Select';
  document.querySelector('.card').classList.add('flipped');

  setTimeout(() => {
    document.querySelector('.card').classList.remove('flipped');
    vaultSummary.style.display = 'none';
  }, 5000);
}

selectBtn.onclick = () => {
  if (!currentPayload) return;

  selected.push(currentPayload);
  total += parseFloat(currentPayload.denomination);
  hudCount.textContent = selected.length;
  hudTotal.textContent = total.toFixed(2);
  hudLink.href = currentPayload.redeem_url;
  selectBtn.textContent = 'Selected';
  selectBtn.disabled = true;

  crest.classList.add('pulse');
  coin.classList.add('pulse');
  setTimeout(() => {
    crest.classList.remove('pulse');
    coin.classList.remove('pulse');
  }, 1200);

  scrollLog.classList.add('glow');
  setTimeout(() => scrollLog.classList.remove('glow'), 1200);

  const pulse = document.createElement('span');
  pulse.className = 'pulse-orb';
  coin.appendChild(pulse);
  setTimeout(() => pulse.remove(), 1200);

  summaryText.innerHTML = `
    You have selected <strong>${selected.length}</strong> tokens totaling <strong>${total.toFixed(2)} Prestige</strong>.
    <br>Last token: ${currentPayload.denomination} Prestige ‚Äî ${currentPayload.serial}
  `;
  vaultSummary.style.display = 'block';

  const rarityIcon = currentPayload.denomination >= 20.00 ? 'üü°' : currentPayload.denomination >= 1.00 ? '‚ö™' : 'üü§';
  const timestamp = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  const li = document.createElement('li');
  li.innerHTML = `${rarityIcon} ${currentPayload.denomination} Prestige<br><small>üï∞Ô∏è ${timestamp} ‚Äî ${currentPayload.serial}</small>`;
  logList.appendChild(li);

  document.body.classList.remove('half-glow', 'full-celebration');
  shimmer.classList.remove('half', 'full');
  shimmer.style.display = 'block';
  void shimmer.offsetWidth;

  if (selected.length === totalTokens) {
    crest.classList.add('burst');
    setTimeout(() => crest.classList.remove('burst'), 1200);
    document.body.classList.add('full-celebration');
    shimmer.classList.add('full');
    ceremonialSound.play();

    const finalEntry = document.createElement('li');
    finalEntry.innerHTML = `üåü Vault Awakened<br><small>üï∞Ô∏è ${timestamp} ‚Äî All tokens selected</small>`;
    logList.appendChild(finalEntry);

    vaultMessage.style.opacity = '1';
    setTimeout(() => vaultMessage.style.opacity = '0', 3000);
  }

  if (!halfwayTriggered && selected.length === Math.ceil(totalTokens / 2)) {
    halfwayTriggered = true;
    document.body.classList.add('half-glow');
    shimmer.classList.add('half');
    shimmer.style.display = 'block';
    void shimmer.offsetWidth;
    setTimeout(() => shimmer.style.display = 'none', 2000);

    chantSound.play();

    for (let i = 0; i < 12; i++) {
      const p = document.createElement('div');
      p.className = 'particle-float';
      p.style.left = `${Math.random() * 100}vw`;
      p.style.top = `${Math.random() * 100}vh`;
      document.body.appendChild(p);
      setTimeout(() => p.remove(), 12000);
    }

    crestSeal.style.opacity = '1';
    setTimeout(() => crestSeal.style.opacity = '0', 4000);

    ceremonyPhrase.style.opacity = '1';
    setTimeout(() => ceremonyPhrase.style.opacity = '0', 4000);
  }

  setTimeout(() => shimmer.style.display = 'none', 2000);
  document.querySelector('.card').classList.add('flipped');
};
</script>


<script>
        function checkOrientation() {
      const notice = document.getElementById("orientationNotice");
      const message = document.getElementById("orientationMessage");
      if (localStorage.getItem("hideOrientationNotice") === "true") {
        notice.style.display = "none";
        return;
      }
      if (window.innerWidth < 768) {
        if (screen.orientation.type && screen.orientation.type.startsWith("portrait")) {
          message.textContent = "üì± For best view: reduce size to 50% or rotate to landscape.";
          notice.style.display = "flex";
        } else {
          message.textContent = "üì± Landscape mode detected. Adjust to your preference.";
          notice.style.display = "flex";
        }
      } else {
        notice.style.display = "none";
      }
    }

    function dismissNotice() {
      if (document.getElementById("dontShowAgain").checked) {
        localStorage.setItem("hideOrientationNotice", "true");
      }
      document.getElementById("orientationNotice").style.display = "none";
    }

    window.addEventListener("load", checkOrientation);
    if (screen.orientation && screen.orientation.addEventListener) {
      screen.orientation.addEventListener("change", checkOrientation);
    } else {
      window.addEventListener("resize", checkOrientation);
    }
  </script>
</body>
</html>
