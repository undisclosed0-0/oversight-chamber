<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Prestige Triumph ‚Äî Oversight Chambers (Hybrid, Restored)</title>

 <!-- Outer prestige shell (light aura) -->
 <style>
/* === Root palette and shared tokens === */
:root {
  --gold: #d4b86a;
  --ivory: #f2f0e9;
  --slate: #2f3036;
  --iron: #222;

  /* Verify aura (dark blue ‚Üí gray) */
  --verify-bg-start: #2c2f48;
  --verify-bg-end: #4a4d5f;
  --verify-border: #3a3d55;

  /* Outer shell */
  --shell-bg-start: #f5f7fa;
  --shell-bg-end: #e6ecf0;
  --shell-card: rgba(255,255,255,0.95);
}

/* === Outer prestige shell (light aura) === */
body {
  font-family: 'Segoe UI', system-ui, sans-serif;
  background: radial-gradient(circle at top center, var(--shell-bg-start) 0%, var(--shell-bg-end) 100%);
  color: #333; margin: 0; padding: 20px;
}

.container {
  max-width: 900px; margin: auto;
  background: var(--shell-card);
  padding: 30px; border-radius: 15px;
  box-shadow: 0 0 20px rgba(75,63,114,0.2);
  backdrop-filter: blur(6px);
}

.crest-header {
  width: 100px; height: 100px; margin: 0 auto 20px;
  background-image: url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh7Xr0yArKKpo2gvFLpUcm9fMR5CgbrkBYTEChDOnIM59NhDxBVFHChMPQQzeVXKnIsS7FOxP4witstDDBjLciMAM1Tq0g_bM86dXGYMLHYms0KiFJniK_gJS0PjbxhgAE1DhdLHvwpD_Id-B2mtbW7SqgWDX72S05uifuP-Ag_XQQMqJGBBNvzV88OjYc/s1600/An%20abstract%20Masterad.png');
  background-size: cover; background-position: center; border-radius: 50%;
  box-shadow: 0 0 20px rgba(194,167,109,0.6);
}

h1, h2, h3 {
  color: #4b3f72; text-align: center;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.12);
  margin: 0 0 14px 0;
}

/* === Verification plaque === */
.verification-plaque {
  margin-top: 25px; padding: 20px;
  border: 2px solid var(--gold); border-radius: 12px;
  background: linear-gradient(to bottom, #fdfcfb, #f3e8e2);
  box-shadow: 0 0 15px rgba(194,167,109,0.4);
  text-align: center; display: none;
}
.verification-plaque textarea {
  width: 100%; height: 120px; margin-top: 10px; padding: 8px;
  border-radius: 8px; border: 1px solid var(--gold);
  font-family: 'Courier New', monospace; font-size: 0.95em; resize: none;
  background: #fffdf8;
}
.verification-plaque button {
  margin-top: 12px; padding: 10px 20px;
  background: linear-gradient(to right, #4b3f72, #6a5acd);
  color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1em;
  box-shadow: 0 4px 12px rgba(75,63,114,0.3);
}
.verification-plaque button:hover {
  background: linear-gradient(to right, #6a5acd, #4b3f72);
}

/* === Floating crest shortcut === */
.floating-crest {
  position: fixed; width: 60px; height: 60px; bottom: 20px; right: 20px;
  background-image: url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh7Xr0yArKKpo2gvFLpUcm9fMR5CgbrkBYTEChDOnIM59NhDxBVFHChMPQQzeVXKnIsS7FOxP4witstDDBjLciMAM1Tq0g_bM86dXGYMLHYms0KiFJniK_gJS0PjbxhgAE1DhdLHvwpD_Id-B2mtbW7SqgWDX72S05uifuP-Ag_XQQMqJGBBNvzV88OjYc/s1600/An%20abstract%20Masterad.png');
  background-size: cover; background-position: center; border-radius: 50%;
  box-shadow: 0 0 20px rgba(194,167,109,0.6); cursor: pointer; z-index: 101; opacity: 0.95;
}
@media (max-width: 860px) { .floating-crest { pointer-events: none; opacity: 0.7; } }

/* === Tap shimmer + zones === */
.tap-zone { position: fixed; width: 64px; height: 64px; top: 0; z-index: 999; }
#tapTopLeft { left: 0; }
#tapTopRight { right: 0; }
.tap-shimmer {
  position: fixed; inset: 0; pointer-events: none; z-index: 998;
  background:
    radial-gradient(120px 120px at 32px 32px, rgba(255,215,0,0.25), transparent 70%),
    radial-gradient(120px 120px at calc(100% - 32px) 32px, rgba(106,90,205,0.22), transparent 70%);
  opacity: 0; transition: opacity 260ms ease;
}
.tap-shimmer.active { opacity: 1; }

/* === Inner ritual styling (panels) === */
.panel-shell {
  background: linear-gradient(180deg, #2a2b2f 0%, #3a3b42 100%);
  border: 3px solid #444; border-radius: 12px;
  box-shadow: inset 0 0 25px rgba(0,0,0,0.8), 0 0 20px rgba(255,215,0,0.18);
  padding: 20px; margin-top: 20px; color: var(--gold);
  font-family: 'Orbitron','Courier New', monospace;
}
.panel-shell h2, .panel-shell h3 {
  color: var(--gold); text-transform: uppercase;
  text-shadow: 0 0 8px rgba(255,215,0,0.6);
}

/* === Color panel (rune grid) === */
#colorPanel { max-width: 880px; margin: 48px auto; padding: 28px; border: 1px solid rgba(212,184,106,0.25); color: var(--ivory); }
#colorPanel .rune-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 0;
  background: #1c1c1c; border: 8px solid #2a2a2a;
}
#colorPanel .rune-btn {
  display: grid; place-items: center; min-height: 100px;
  border: 6px solid #3a3a3a; background: #2a2b2f;
  font-family: "Cinzel", serif; font-weight: 700; cursor: pointer;
  box-shadow: inset 0 2px 6px rgba(255,255,255,0.05), inset 0 -4px 8px rgba(0,0,0,0.9), 0 0 12px rgba(0,0,0,0.6);
  transition: all 200ms ease;
}
#colorPanel .rune-btn .sigil {
  font-size: 1.6rem; color: rgba(212,184,106,0.9);
  text-shadow: 0 0 6px rgba(212,184,106,0.6), 0 0 14px rgba(242,240,233,0.35);
}
#colorPanel .rune-btn small { margin-top: 6px; font-size: 1rem; color: #aaa; text-shadow: 0 0 3px rgba(0,0,0,0.6); }

/* Active color glows */
#colorPanel .rune-btn.red.active         { background: radial-gradient(circle at 50% 30%, rgba(160,40,40,0.75), #2a2b2f 70%); }
#colorPanel .rune-btn.blue.active        { background: radial-gradient(circle at 50% 30%, rgba(40,100,180,0.75), #2a2b2f 70%); }
#colorPanel .rune-btn.green.active       { background: radial-gradient(circle at 50% 30%, rgba(60,150,90,0.75), #2a2b2f 70%); }
#colorPanel .rune-btn.mustard.active     { background: radial-gradient(circle at 50% 30%, rgba(190,160,60,0.72), #2a2b2f 70%); }
#colorPanel .rune-btn.violet.active      { background: radial-gradient(circle at 50% 30%, rgba(130,80,180,0.75), #2a2b2f 70%); }
#colorPanel .rune-btn.cyan.active        { background: radial-gradient(circle at 50% 30%, rgba(60,170,190,0.75), #2a2b2f 70%); }
#colorPanel .rune-btn.deepred.active     { background: radial-gradient(circle at 50% 30%, rgba(160,50,50,0.75), #2a2b2f 70%); }
#colorPanel .rune-btn.emerald.active     { background: radial-gradient(circle at 50% 30%, rgba(50,170,110,0.75), #2a2b2f 70%); }
#colorPanel .rune-btn.deepviolet.active  { background: radial-gradient(circle at 50% 30%, rgba(110,60,160,0.75), #2a2b2f 70%); }

#colorPanel .rune-btn.active .sigil,
#colorPanel .rune-btn.active small {
  color: var(--ivory);
  text-shadow: 0 0 6px rgba(255,220,120,0.6), 0 0 14px rgba(255,255,180,0.4);
}

/* Indicators + readout */
#colorPanel .indicator-lines { display: flex; justify-content: center; gap: 12px; margin-top: 8px; }
#colorPanel .indicator-lines span {
  width: 28px; height: 4px; border-radius: 2px; background: rgba(90, 60, 30, 0.4);
  box-shadow: inset 0 0 4px rgba(0,0,0,0.6); transition: all 200ms ease;
}
#colorPanel .indicator-lines span.active {
  background: rgba(255,140,60,0.9);
  box-shadow: 0 0 6px rgba(255,140,60,0.65), 0 0 12px rgba(255,200,120,0.45), 0 0 20px rgba(255,160,80,0.35);
}
#sequenceReadout {
  font-family: "Share Tech Mono", monospace; font-size: 1.2rem; color: #9fe8ff;
  background: rgba(20, 30, 40, 0.85); border: 2px inset rgba(120,180,200,0.4);
  padding: 6px 12px; margin-top: 12px; text-align: center; letter-spacing: 0.1em;
  text-shadow: 0 0 6px rgba(0,255,255,0.4), 0 0 12px rgba(0,180,255,0.25);
  overflow: hidden; white-space: nowrap;
}

/* Ritual controls: VERIFY + CLEAR (unified aura) */
.ritual-controls { display: flex; gap: 16px; justify-content: center; margin-top: 24px; }

/* === Unified ceremonial button aura (dark blue‚Äìgray) === */
.runez-btn {
  margin-top: 22px; width: 100%; padding: 13px 16px;
  background: linear-gradient(145deg, var(--verify-bg-start), var(--verify-bg-end));
  color: var(--ivory);
  border: 2px solid var(--verify-border);
  border-radius: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.06em;
  box-shadow: 0 0 14px rgba(90,100,140,0.6), inset 0 0 8px rgba(255,255,255,0.1);
  cursor: pointer; transition: transform 0.14s ease, box-shadow 0.25s ease;
}
.runez-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 20px rgba(90,100,140,0.8), inset 0 0 12px rgba(255,255,255,0.2);
}

/* Optional palette variants (if you need dynamic verify aura) */
.runez-btn.rune-red    { background: radial-gradient(circle,#b04444,#d46a6a); border-color:#b04444; }
.runez-btn.rune-violet { background: radial-gradient(circle,#6a3fa8,#8a6ad4); border-color:#6a3fa8; }
.runez-btn.rune-gold   { background: radial-gradient(circle,#c2a76d,#f2e6a9); border-color:#c2a76d; }

/* === Admin Chamber ‚Äî Grey Prestige Hybrid === */
#adminForm {
  max-width: 640px; margin: 40px auto; padding: 32px;
  background: linear-gradient(180deg, #2a2b2f 0%, #3a3b42 100%);
  border-radius: 16px; border: 1px solid rgba(212, 184, 106, 0.25);
  box-shadow: 0 0 20px rgba(212, 184, 106, 0.12), inset 0 0 14px rgba(60, 65, 75, 0.6), 0 10px 24px rgba(0, 0, 0, 0.55);
  color: var(--ivory); position: relative; overflow: hidden;
}
#adminForm h2 {
  font-size: 1.5rem; text-align: center; margin-bottom: 28px; color: var(--ivory);
  letter-spacing: 0.05em; text-shadow: 0 0 8px rgba(212, 184, 106, 0.25);
  position: relative; padding-top: 70px;
}
#adminForm h2::before {
  content: ""; position: absolute; top: 0; left: 50%; width: 56px; height: 56px; transform: translateX(-50%);
  background: radial-gradient(circle at center, rgba(212,184,106,0.9), rgba(242,240,233,0.85), rgba(95,192,181,0.7));
  border-radius: 50%; box-shadow: 0 0 12px rgba(212, 184, 106, 0.5), 0 0 20px rgba(95, 192, 181, 0.35);
}
#adminForm h2::after {
  content: ""; position: absolute; top: 12px; left: 50%; width: 28px; height: 28px; transform: translateX(-50%) rotate(45deg);
  background: linear-gradient(135deg, rgba(242,240,233,0.95), rgba(212,184,106,0.85));
  box-shadow: 0 0 8px rgba(212, 184, 106, 0.4), inset 0 0 6px rgba(95, 192, 181, 0.25);
}

/* Admin labels and fields */
#adminForm label { display: block; margin: 14px 0 6px; font-weight: 600; color: var(--gold); }
#adminForm input, #adminForm select {
  width: 100%; padding: 12px 14px; background: var(--slate); color: var(--ivory);
  border: 1px solid rgba(90, 106, 122, 0.45); border-radius: 10px;
  box-shadow: inset 0 0 8px rgba(50, 55, 65, 0.6), 0 1px 6px rgba(0, 0, 0, 0.35);
  transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.12s ease;
}
#adminForm input:focus, #adminForm select:focus {
  outline: none; border-color: var(--gold);
  box-shadow: inset 0 0 10px rgba(212, 184, 106, 0.25), 0 0 10px rgba(212, 184, 106, 0.25);
  transform: translateY(-1px);
}
#adminForm #verifyStatus { margin-top: 14px; font-size: 0.95rem; text-align: center; color: #b0b2bb; }

/* === Public (‚Äúprestige‚Äù) form ‚Äî consolidated === */
.prestige-form {
  width: 100%; max-width: 600px; margin: 40px auto; padding: 32px;
  background: #fff; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  font-family: "Segoe UI", sans-serif; color: #333;
}
.prestige-form h1 { font-size: 1.4em; margin-bottom: 20px; text-align: center; color: #4b3f72; }
.prestige-form label { display: block; margin-top: 14px; margin-bottom: 6px; font-weight: 600; color: #4b3f72; }
.prestige-form input[type="text"], .prestige-form input[type="tel"], .prestige-form select {
  width: 100%; padding: 12px 14px; border: 1px solid #b8aee0; border-radius: 6px; font-size: 1em; background: #fafafa; color: #4b3f72;
  transition: border 0.2s ease, box-shadow 0.2s ease;
}
.prestige-form input:focus, .prestige-form select:focus { border-color: #6a5acd; box-shadow: 0 0 6px rgba(106,90,205,0.3); outline: none; }
/* Generator button in public form (use unified aura for parity) */
.prestige-form #genNameBtn { width: 70%; max-width: 320px; }
.prestige-form #genNameBtn,
.prestige-form button[type="submit"] {
  margin-top: 12px; padding: 12px 16px; border-radius: 10px; border: 2px solid var(--verify-border);
  background: linear-gradient(145deg, var(--verify-bg-start), var(--verify-bg-end));
  color: var(--ivory); font-weight: 700; text-transform: uppercase; letter-spacing: 0.06em;
  box-shadow: 0 0 14px rgba(90,100,140,0.6), inset 0 0 8px rgba(255,255,255,0.1);
  cursor: pointer; transition: transform 0.14s ease, box-shadow 0.25s ease;
  width: 100%;
}
.prestige-form button[type="submit"]:hover,
.prestige-form #genNameBtn:hover {
  transform: translateY(-2px); box-shadow: 0 0 20px rgba(90,100,140,0.8), inset 0 0 12px rgba(255,255,255,0.2);
}

/* === Mystery Box chamber === */
#mysteryBoxChamber .mystery-title {
  font-size: 1.6rem; text-align: center; letter-spacing: 0.06em; color: #f6e27a;
  text-shadow: 0 0 12px rgba(255, 200, 80, 0.35); margin-bottom: 20px;
}
#mysteryBoxChamber .mystery-crest { font-size: 2em; margin-bottom: 16px; text-shadow: 0 0 12px rgba(255,215,0,0.8); }

/* === Oversight entry panel === */
#oversightPanel { max-width: 480px; margin: 0 auto; padding: 20px; }
@media (max-width: 860px) { #oversightPanel { width: 90%; margin: 0 auto; } }

/* === Super Code panel inputs === */
#superCodePanel input[type="text"],
#superCodePanel input[type="password"] {
  width: 60%; max-width: 280px; margin: 10px auto; display: block;
  padding: 10px; border-radius: 6px; border: 2px solid #333; background: #111; color: var(--gold); font-weight: bold; box-shadow: inset 0 0 6px rgba(0,0,0,0.7);
}
/* Center panel buttons */
#mysteryBoxPanel button, #finalBranchPanel button, #puzzleBoxPanel button, #superCodePanel button {
  display: block; margin: 20px auto; text-align: center;
}

/* === Rune feedback overlays for panel grid === */
.rune-btn.glow { box-shadow: 0 0 18px rgba(255,215,0,0.9); }
.rune-btn.after-correct { outline: 2px solid rgba(106,255,106,0.5); box-shadow: 0 0 12px rgba(106,255,106,0.6); }
.rune-btn.after-wrong   { outline: 2px solid rgba(255,74,74,0.5); box-shadow: 0 0 12px rgba(255,74,74,0.6); }
.rune-btn.after-correct, .rune-btn.after-wrong { z-index: 1; }


    /* Cube (Labyrinth) */
   .cube-container {
  width: 340px;
  height: 340px;
  perspective: 1100px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
}

   .cube {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transform: translateZ(-120px) rotateX(-15deg) rotateY(20deg);
  transition: transform 0.15s ease-out;
}

    .cube-face {
      position: absolute; width: 340px; height: 340px;
      background: radial-gradient(120px 120px at 50% 40%, rgba(25,25,25,0.95), rgba(12,12,12,0.95));
      border: 2px solid #555; box-shadow: inset 0 0 40px rgba(0,255,180,0.08);
      display: flex; flex-direction: column; justify-content: center; align-items: center; font-size: 14px; color: #fff;
    }
    .cube-face .rune { display: none; margin-top: 10px; font-size: 22px; color: #00f5b5; text-shadow: 0 0 8px rgba(0,245,181,0.65); }
    .front  { transform: rotateY(0deg)   translateZ(170px); }
    .back   { transform: rotateY(180deg) translateZ(170px); }
    .right  { transform: rotateY(90deg)  translateZ(170px); }
    .left   { transform: rotateY(-90deg) translateZ(170px); }
    .top    { transform: rotateX(90deg)  translateZ(170px); }
    .bottom { transform: rotateX(-90deg) translateZ(170px); }
    #unlockMessage { display: none; margin-top: 10px; font-size: 18px; color: #00f5b5; letter-spacing: 0.3px; text-align: center; }

   /* Lights Out */
/* Lights Out */
/* Lights Out ‚Äî final override */
/* Lights Out */
#lightsGrid {
  display: grid;
  grid-template-columns: repeat(3, 60px);
  gap: 6px;
}

#lightsGrid .light-cell {
  width: 60px;
  height: 60px;
  background: #000;              /* solid black OFF state */
  border: 1px solid #333;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: inset 0 0 6px rgba(0,0,0,0.7);
  transition: background 140ms ease, box-shadow 140ms ease;
  -webkit-appearance: none;
  appearance: none;
}

#lightsGrid .light-cell.on {
  background: #ffd700;           /* glowing gold ON state */
  box-shadow: 0 0 14px rgba(255,215,0,0.7),
              inset 0 0 6px rgba(0,0,0,0.4);
}

    /* Labyrinth Path */
    #labyrinthGrid { display: grid; grid-template-columns: repeat(5,48px); gap: 6px; }
    #labyrinthGrid .cell { width: 48px; height: 48px; background: #161616; border: 1px solid #3a3a3a; border-radius: 6px; cursor: pointer; transition: background 140ms ease, box-shadow 140ms ease; }
    #labyrinthGrid .cell.on { background: #00b8f5; box-shadow: 0 0 14px rgba(0,184,245,0.55); }

    /* Memory */
    #memoryButtons { margin-top: 8px; display: flex; gap: 10px; }
    .mem { width: 64px; height: 64px; border-radius: 10px; font-size: 22px; background: #212121; border: 1px solid #4b4b4b; transition: filter 150ms ease, box-shadow 150ms ease; }
    .mem.flash { filter: brightness(1.6); box-shadow: 0 0 14px rgba(255,255,255,0.4); }

    /* Math */
    #mathGrid { display: flex; gap: 10px; }
    .num { min-width: 54px; height: 54px; border-radius: 8px; background: #212121; border: 1px solid #4b4b4b; font-weight: 600; font-size: 18px; transition: transform 140ms ease, box-shadow 140ms ease, background 140ms ease; }
    .num.sel { transform: translateY(-2px); background: #333; box-shadow: 0 0 12px rgba(255,255,255,0.2); }

    /* Final clearance mini-cube (visual) */
    .glowing-cube {
      width: 120px; height: 120px; margin: 16px auto;
      background: linear-gradient(145deg, #6a0dad, #ffd700);
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(106,13,173,0.8), 0 0 40px rgba(255,215,0,0.6);
      animation: cubeGlow 3s infinite alternate;
    }
    @keyframes cubeGlow {
      0%   { transform: rotateY(0deg) rotateX(0deg); box-shadow: 0 0 20px rgba(106,13,173,0.8); }
      50%  { transform: rotateY(180deg) rotateX(20deg); box-shadow: 0 0 40px rgba(255,215,0,0.8); }
      100% { transform: rotateY(360deg) rotateX(0deg); box-shadow: 0 0 20px rgba(106,13,173,0.8); }
    }

    /* Small screen polish */
    @media (max-width: 480px) {
      body { padding: 10px; }
      .container { padding: 20px; }
      h1 { font-size: 1.4em; }
      .crest-header { width: 80px; height: 80px; }
    }
/* Void shell for Puzzle Box */
#imgVoidPuzzle {
  width: 100%;
  max-width: 340px;
  aspect-ratio: 1 / 1;
  margin: 0 auto;
  padding: 16px;
  background: radial-gradient(600px 400px at 50% 50%, rgba(0,0,0,0.85), #0d0d0d);
  border-radius: 16px;
  box-shadow:
    inset 0 0 60px rgba(0,0,0,0.9),
    0 0 40px rgba(255,215,0,0.1);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Cube container */
.cube-container {
  width: 340px;
  height: 340px;
  perspective: 1100px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
}

.cube-face {
  width: 340px;
  height: 340px;
  padding: 0;
  box-sizing: border-box;
  overflow: hidden;
}
.cube-face * {
  max-width: 100%;
  max-height: 100%;
  box-sizing: border-box;
  overflow: hidden;
}


/* True cube transforms */
.front  { transform: rotateY(0deg)   translateZ(170px); }
.back   { transform: rotateY(180deg) translateZ(170px); }
.right  { transform: rotateY(90deg)  translateZ(170px); }
.left   { transform: rotateY(-90deg) translateZ(170px); }
.top    { transform: rotateX(90deg)  translateZ(170px); }
.bottom { transform: rotateX(-90deg) translateZ(170px); }

/* Rune styling */
.rune {
  display: none;
  margin-top: 10px;
  font-size: 22px;
  color: #00f5b5;
  text-shadow: 0 0 8px rgba(0,245,181,0.65);
}

/* Inputs and buttons */
.cube-face input,
.cube-face button,
.cube-face .cell,
.cube-face .num {
  max-width: 100%;
  box-sizing: border-box;
}

#dial {
  width: 100%;
  margin-top: 8px;
}

#wordInput {
  width: 100%;
  padding: 10px;
  font-size: 1em;
  border-radius: 6px;
  border: 1px solid #666;
  background: #111;
  color: #fff;
}

/* Mobile scaling */
@media (max-width: 480px) {
  #imgVoidPuzzle {
    max-width: 240px;
    padding: 12px;
  }
  .cube-face {
    font-size: 12px;
    padding: 8px;
  }
}

    #imgVoidPuzzle {
  box-shadow:
    inset 0 0 80px rgba(0,0,0,0.95),
    0 0 60px rgba(255,215,0,0.08);
}
/* Panel always regular size */
#puzzleBoxPanel {
  max-width: 480px;   /* fixed ceremonial width */
  margin: 40px auto;
  padding: 20px;
  background: var(--panel-bg);
  border: 3px solid #444;
  border-radius: 12px;
  box-shadow: inset 0 0 25px rgba(0,0,0,0.8),
              0 0 20px rgba(255,215,0,0.18);
  color: var(--gold);
  font-family: 'Orbitron','Courier New', monospace;
}

/* Void shell default */
#imgVoidPuzzle {
  transition: transform 0.6s ease, max-width 0.6s ease;
}

/* Mobile shrink state */
@media (max-width: 768px) {
  #imgVoidPuzzle.shrunk {
    max-width: 50%;   /* half the panel width */
    transform: scale(0.9); /* slight inward shrink */
    margin: 0 auto;
    padding: 12px;
  }
}
/* Mystery Box (hidden branch) */
#mysteryBoxPanel { display: none; border: 3px solid #6a0dad; box-shadow: inset 0 0 25px rgba(0,0,0,0.8), 0 0 20px rgba(138,43,226,0.6); color: #e0dfff; text-align: center; position: relative; overflow: hidden; }
.mystery-title { margin-bottom: 12px; }
.mystery-crest { font-size: 2em; margin-bottom: 16px; text-shadow: 0 0 12px rgba(255,215,0,0.8); }
.cube-aura {
  position: absolute; inset: 0; pointer-events: none; z-index: 0;
  background: radial-gradient(180px 180px at 30% 40%, rgba(106,13,173,0.25), transparent 70%), radial-gradient(220px 220px at 70% 60%, rgba(255,215,0,0.18), transparent 70%);
  animation: auraPulse 5s ease-in-out infinite;
}
@keyframes auraPulse { 0%,100%{filter:saturate(1); opacity:0.75;} 50%{filter:saturate(1.3); opacity:1;} }

/* Locker dial */
.locker-dial { width: 180px; height: 180px; position: relative; }
.locker-dial .dial-face {
  width: 100%; height: 100%; border-radius: 50%;
  background: radial-gradient(120px 120px at 50% 50%, #0e0e0e, #111);
  border: 2px solid #555; box-shadow: inset 0 0 18px rgba(0,0,0,0.8), 0 0 16px rgba(0,245,181,0.15);
  position: relative;
}
.locker-dial .dial-pointer {
  position: absolute; left: 50%; top: 10%; width: 3px; height: 40%;
  transform-origin: bottom center; background: #00f5b5; box-shadow: 0 0 10px rgba(0,245,181,0.6);
}
.locker-dial .dial-numbers {
  position: absolute; inset: 0; display: block; pointer-events: none; color: #ddd; font-size: 12px; font-weight: 700;
}
.locker-dial .dial-numbers span { position: absolute; left: 50%; top: 50%; transform-origin: 0 0; }

/* Small screen polish */
@media (max-width: 480px) {
  body { padding: 10px; }
  .container { padding: 20px; }
  h1 { font-size: 1.4em; }
  .crest-header { width: 80px; height: 80px; }
}

/* Tablet/Mobile panel override */
@media (max-width: 768px) {
  .panel-shell, #colorPanel, #adminForm, #mysteryBoxChamber {
    width: 100%; max-width: 100%; margin: 20px auto; padding: 20px; border-radius: 12px;
  }
}
/* Admin VERIFY button (source of truth) */
#adminForm #verifyTierBtn {
  margin-top: 22px;
  width: 100%;
  padding: 13px 16px;
  background: linear-gradient(90deg, #4a4b52, #5a6a7a);
  color: #f2f0e9;
  border: 1px solid rgba(212, 184, 106, 0.35);
  border-radius: 10px;
  font-weight: 700;
  letter-spacing: 0.05em;
  box-shadow:
    0 6px 18px rgba(0, 0, 0, 0.5),
    inset 0 0 6px rgba(212, 184, 106, 0.12);
  cursor: pointer;
  transition: transform 0.12s ease, box-shadow 0.25s ease, filter 0.2s ease;
}
#adminForm #verifyTierBtn:hover {
  transform: translateY(-2px);
  box-shadow:
    0 10px 24px rgba(0, 0, 0, 0.6),
    0 0 14px rgba(212, 184, 106, 0.25);
  filter: brightness(1.05);
}

/* Rune VERIFY + CLEAR buttons ‚Äî identical aura */
#runeVerifyBtn,
#runeClearBtn {
  margin-top: 22px;
  width: 100%;
  padding: 13px 16px;
  background: linear-gradient(90deg, #4a4b52, #5a6a7a);
  color: #f2f0e9;
  border: 1px solid rgba(212, 184, 106, 0.35);
  border-radius: 10px;
  font-weight: 700;
  letter-spacing: 0.05em;
  box-shadow:
    0 6px 18px rgba(0, 0, 0, 0.5),
    inset 0 0 6px rgba(212, 184, 106, 0.12);
  cursor: pointer;
  transition: transform 0.12s ease, box-shadow 0.25s ease, filter 0.2s ease;
}
#runeVerifyBtn:hover,
#runeClearBtn:hover {
  transform: translateY(-2px);
  box-shadow:
    0 10px 24px rgba(0, 0, 0, 0.6),
    0 0 14px rgba(212, 184, 106, 0.25);
  filter: brightness(1.05);
}
/* Admin form text field focus aura (source of truth) */
#adminForm input:focus,
#adminForm select:focus {
  outline: none;
  border-color: #d4b86a;
  box-shadow:
    inset 0 0 10px rgba(212, 184, 106, 0.25),
    0 0 10px rgba(212, 184, 106, 0.25);
  transform: translateY(-1px);
}

/* Admin Generator + Rune VERIFY/CLEAR buttons ‚Äî same glow aura */
#genNameBtn,
#runeVerifyBtn,
#runeClearBtn {
  margin-top: 22px;
  width: 100%;
  padding: 13px 16px;
  background: linear-gradient(90deg, #4a4b52, #5a6a7a);
  color: #f2f0e9;
  border: 1px solid rgba(212, 184, 106, 0.35);
  border-radius: 10px;
  font-weight: 700;
  letter-spacing: 0.05em;
  box-shadow:
    0 6px 18px rgba(0, 0, 0, 0.5),
    inset 0 0 6px rgba(212, 184, 106, 0.12);
  cursor: pointer;
  transition: transform 0.12s ease, box-shadow 0.25s ease, filter 0.2s ease;
}

/* Hover glow matches text field focus aura */
#genNameBtn:hover,
#runeVerifyBtn:hover,
#runeClearBtn:hover {
  transform: translateY(-2px);
  border-color: #d4b86a;
  box-shadow:
    inset 0 0 10px rgba(212, 184, 106, 0.25),
    0 0 10px rgba(212, 184, 106, 0.25),
    0 10px 24px rgba(0, 0, 0, 0.6);
  filter: brightness(1.05);
}
/* Admin chamber input + select sizing */
#adminForm input,
#adminForm select,
#adminForm textarea {
  width: 100%;               /* full width inside the chamber */
  min-height: 52px;          /* taller field height */
  font-size: 1.05rem;        /* slightly larger text */
  padding: 14px 16px;        /* more breathing room */
  border-radius: 12px;       /* match button aura */
  box-sizing: border-box;    /* consistent sizing */
}

/* Ensure phone + code fields don‚Äôt look cramped */
#adminPhone,
#adminCode {
  letter-spacing: 0.05em;    /* ceremonial spacing */
  font-weight: 600;          /* prestige emphasis */
}

// When Puzzle Box opens
function openPuzzleBox() {
  document.getElementById('puzzleBoxPanel').classList.add('shrunk');
  document.getElementById('puzzleBoxPanel').style.display = 'block';
}

// When Puzzle Box is solved or closed
function closePuzzleBox() {
  document.getElementById('puzzleBoxPanel').classList.remove('shrunk');
  document.getElementById('puzzleBoxPanel').style.display = 'none';
}

/* Shrink state for mobile */
@media (max-width: 768px) {
  #imgVoidPuzzle.shrunk {
    max-width: 50%;   /* half screen width */
    margin: 0 auto;
    padding: 12px;
  }
}

/* Mobile PuzzleBox notification */
#puzzleNotice {
  display: none;
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  max-width: 90%;
  background: rgba(0,0,0,0.85);
  color: #ffd700;
  font-family: 'Orbitron','Courier New', monospace;
  font-size: 0.95em;
  padding: 12px 18px;
  border-radius: 10px;
  box-shadow: 0 0 12px rgba(255,215,0,0.6);
  z-index: 9999;
  text-align: center;
}
#puzzleNotice.show {
  display: block;
  animation: fadeIn 0.4s ease;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateX(-50%) translateY(20px); }
  to   { opacity: 1; transform: translateX(-50%) translateY(0); }
}
#hiddenSigil {
  display: none;
  position: absolute;
  bottom: -40px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 22px;
  color: #ffd700;
  text-shadow: 0 0 12px rgba(255,215,0,0.8);
  animation: pulseSigil 2s infinite;
}

@keyframes pulseSigil {
  0%   { opacity: 0.4; transform: translateX(-50%) scale(0.9); }
  50%  { opacity: 1;   transform: translateX(-50%) scale(1.1); }
  100% { opacity: 0.4; transform: translateX(-50%) scale(0.9); }
}

/* Fade-out effect */
#hiddenSigil.fadeOut {
  animation: fadeOutSigil 2s forwards;
}

@keyframes fadeOutSigil {
  from { opacity: 1; transform: translateX(-50%) scale(1); }
  to   { opacity: 0; transform: translateX(-50%) scale(0.8); }
}

#imgVoidPuzzle.unlocked {
  box-shadow:
    inset 0 0 60px rgba(0,0,0,0.9),
    0 0 40px rgba(255,215,0,0.6),
    0 0 80px rgba(106,13,173,0.6),
    0 0 120px rgba(0,245,181,0.4);
  animation: auraDance 6s infinite alternate;
}

@keyframes auraDance {
  0%   { transform: scale(1) rotate(0deg); }
  50%  { transform: scale(1.05) rotate(2deg); }
  100% { transform: scale(1) rotate(-2deg); }
}
/* Cube fade-out */
#labyrinthCube.fadeOut {
  animation: fadeOutCube 3s forwards;
}

@keyframes fadeOutCube {
  from { opacity: 1; transform: scale(1) rotateY(0deg); }
  to   { opacity: 0; transform: scale(0.85) rotateY(15deg); }
}

/* === Mystery Box chamber (hidden branch) === */
#mysteryBoxPanel {
  display: none;
  border: 3px solid var(--violet);
  box-shadow: inset 0 0 25px rgba(0,0,0,0.8), 0 0 20px rgba(138,43,226,0.6);
  color: #e0dfff;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.mystery-title { margin-bottom: 12px; }
.mystery-crest { font-size: 2em; margin-bottom: 16px; text-shadow: 0 0 12px rgba(255,215,0,0.8); }

/* Glowing cube aura behind Mystery Box */
.cube-aura {
  position: absolute; inset: 0; pointer-events: none; z-index: 0;
  background:
    radial-gradient(180px 180px at 30% 40%, rgba(106,13,173,0.25), transparent 70%),
    radial-gradient(220px 220px at 70% 60%, rgba(255,215,0,0.18), transparent 70%);
  animation: auraPulse 5s ease-in-out infinite;
}
@keyframes auraPulse {
  0%, 100% { filter: saturate(1); opacity: 0.75; }
  50%      { filter: saturate(1.3); opacity: 1; }
}
/* Oversight entry panel */
#oversightPanel {
  max-width: 480px;       /* fixed ceremonial width */
  margin: 0 auto;         /* center horizontally */
  padding: 20px;
}

/* Tablet/Mobile override */
@media (max-width: 860px) {
  #oversightPanel {
    width: 90%;           /* responsive but centered */
    margin: 0 auto;
  }
}
  </style>
</head>
<body>
  <div class="container">
    <div class="crest-header"></div>
    <h1>Prestige Triumph: Oversight Entry</h1>

    <!-- Public form -->
    <form id="love-form" method="POST" class="prestige-form"
      action="https://www.blogger.com/contact-form.do"
      target="hidden_iframe"
      onsubmit="return submitCeremonialForm();"
      style="max-width:600px;margin:40px auto;padding:32px;background:#fff;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.12);">
      <label for="role">Select Tier</label>
      <select id="role" name="role" required>
        <option value="">Select your role</option>
        <option value="Initiate">Initiate</option>
        <option value="Steward">Steward</option>
        <option value="Neighbor">Neighbor</option>
        <option value="Contributor">Contributor</option>
        <option value="Observer">Observer</option>
        <option value="Supporter">Supporter</option>
        <option value="Archivist">Archivist</option>
      </select>

      <div style="text-align:center; margin:12px 0 18px 0;">
        <button type="button" id="genNameBtn"
                onclick="generateNameFromTier()"
                style="width:70%; max-width:320px; background:#c2a76d; color:#fff;
                       border:none; padding:10px 18px; border-radius:6px;
                       font-size:1em; box-shadow:0 2px 6px rgba(0,0,0,0.2);
                       cursor:pointer;">
          ‚ú® Generate Prestige Name
        </button>
      </div>

      <input type="text" id="name" name="name" placeholder="e.g., Solenne of the Third Tier" required style="width:100%;padding:12px 14px;border:1px solid #b8aee0;border-radius:6px;background:#fafafa;color:#4b3f72;">
      <label for="phone">Contact Number</label>
      <input type="tel" id="phone" name="phone" placeholder="e.g., +1 616-555-1234" required style="width:100%;padding:12px 14px;border:1px solid #b8aee0;border-radius:6px;background:#fafafa;color:#4b3f72;">

      <textarea id="message" name="message" style="display:none;"></textarea>
      <input type="email" name="email" id="bloggerEmail" style="display:none;">
      <button type="submit" style="margin-top:24px;width:100%;padding:14px;background:linear-gradient(to right,#4b3f72,#6a5acd);color:white;border:none;border-radius:8px;font-size:1.1em;cursor:pointer;">Create Account</button>

      <!--<p id="tapHint" style="margin-top:10px;">Tap top-left then top-right to unlock Admin gate.</p>-->
    </form>

    <!-- Admin chamber -->
<!-- Admin Chamber (hidden by default) -->
<form id="adminForm"
      method="POST"
      action="https://www.blogger.com/contact-form.do"
      target="hidden_iframe"
      onsubmit="return handleAdminAccess(false);"
      class="chamber-form"
      style="display:none;">
   <h2>Admin Access</h2>
  
   <!-- Tier selection -->
  <label for="adminTier">Tier</label>
  <select id="adminTier" name="adminTier" required>
    <option value="">-- Select Tier --</option>
    <option value="Admin">Admin</option>
    <option value="MasterAdmin">MasterAdmin</option>
    <option value="Overseer">Overseer</option>
    <option value="Controller">Controller</option>
    <option value="Custodian">Custodian</option>
    <option value="Guardian">Guardian</option>
    <option value="Sentinel">Sentinel</option>
    <option value="Supervisor">Supervisor</option>
    <option value="Coordinator">Coordinator</option>
    <option value="Director">Director</option>
    <option value="Chancellor">Chancellor</option>
    <option value="Prefect">Prefect</option>
    <option value="Warden">Warden</option>
    <option value="Marshal">Marshal</option>
    <option value="Commander">Commander</option>
    <option value="Principal">Principal</option>
    <option value="Chief">Chief</option>
    <option value="SovereignAdmin">SovereignAdmin</option>
    <option value="LegacyAdmin">LegacyAdmin</option>
  </select>

 
<!-- Specialized name generator -->
<button type="button" id="adminGenNameBtn"class="runez-btn">Generate Specialized Name</button><br>
<br>
<br>

<!-- Target field (same as public form) -->
<input type="text" id="adminName" name="name" placeholder="Ceremonial Name" />

  

  <!-- Contact phone -->
  <label for="adminPhone">Contact Phone</label>
  <input id="adminPhone" name="phone" type="tel" placeholder="(###) ###-####" required />

  <!-- Clearance code -->
  <label for="adminCode">Clearance Code</label>
  <input id="adminCode" name="adminCode" type="password" required />


  <!-- Hidden Blogger fields -->
  <textarea id="adminMessage" name="message" style="display:none;"></textarea>
  <input type="email" id="adminEmail" name="email" style="display:none;">

  <!-- Buttons -->
  <button type="submit" id="runeClearBtn" class="runez-btn">Submit Admin Form</button>
  <button type="button" id="verifyTierBtn" style="display:none;">Verify</button>

  <!-- Status -->
  <p id="verifyStatus"></p>
</form>



<div id="colorPanel" class="panel-shell" style="display:none;">
      <div class="ritual-header" style="display:flex;flex-direction:column;align-items:center;gap:12px;margin-bottom:16px;">
        <div class="runic">·ö†·õá·öª·õú·ö±</div>
        <div class="sigil" aria-hidden="true" style="position:relative;width:72px;height:72px;display:flex;align-items:center;justify-content:center;filter:drop-shadow(0 0 14px rgba(212,184,106,0.45));">
          <span class="sigil-ring" style="position:absolute;inset:0;border-radius:50%;background:radial-gradient(circle, rgba(212,184,106,0.8), rgba(95,192,181,0.7));"></span>
          <span class="sigil-core" style="position:absolute;inset:18px;border-radius:50%;background:radial-gradient(circle, rgba(40,40,45,0.8), rgba(90,106,122,0.6));"></span>
          <span class="sigil-square" style="position:absolute;width:36px;height:36px;transform:rotate(45deg);background:linear-gradient(135deg, rgba(242,240,233,0.95), rgba(212,184,106,0.85));"></span>
        </div>
      </div>

      <p class="designation">Designation: <strong id="nameInRitual"></strong></p>

      <div class="indicator-lines" id="indicatorLines">
        <span></span><span></span><span></span><span></span>
</div>

      <div id="sequenceReadout" class="sequence">‚Äî ‚Äî ‚Äî</div>
      <div class="rune-grid" id="panelButtons"></div>

      <div class="ritual-controls">
        <button type="button" id="runeVerifyBtn">VERIFY</button>
        <button type="reset" id="runeClearBtn">CLEAR</button>
      </div>
    </div>

    <!-- Access keypad -->
    <div id="superCodePanel" class="panel-shell" style="display:none; position:relative;">
      <h3>Access Panel</h3>
      <div class="panel-sigil">‚ôõ</div>
      <div class="panel-content">
        <p>Rune keypad unlocked. Enter access code to proceed.</p>
        <input id="accessCodeInput" type="text" placeholder="Enter code (X-719-BOX)">
       <button type="button" id="accessConfirmBtn" class="runez-btn">CONFIRM</button>
        <p id="accessCodeStatus"></p>
      </div>
    </div>

    <!-- Mystery Box chamber -->
    <div id="mysteryBoxChamber" class="panel-shell" style="display:none;">
      <h2 class="mystery-title">Mystery Box Chamber</h2>
      <div class="mystery-crest">‚ôõ ‚öö ‚üÅ</div>
      <p>The chamber hums with hidden power. Attempt the Puzzle Box?</p>
      <button id="attemptPuzzleBtn">Attempt Puzzle Box</button>
    </div>

 <!-- Puzzle Box ‚Äî Labyrinth Cube -->
<!-- Puzzle Box ‚Äî Labyrinth Cube -->
<div id="puzzleBoxPanel" class="panel-shell" style="display:none;">
  <h2 class="mystery-title">Puzzle Box ‚Äî Labyrinth Cube</h2>
  <p>Designation: <strong id="nameInPuzzle"></strong></p>
<div id="hiddenSigil">‚úß Triumphal Sigil ‚úß</div>

  <div id="imgVoidPuzzle">
    <div class="cube-container">
      <div class="cube" id="labyrinthCube">
        <div class="cube-face front">
          <p>Toggle all lights green</p>
          <div id="lightsGrid">
            <button class="light-cell"></button><button class="light-cell"></button><button class="light-cell"></button>
            <button class="light-cell"></button><button class="light-cell"></button><button class="light-cell"></button>
            <button class="light-cell"></button><button class="light-cell"></button><button class="light-cell"></button>
          </div>
          <div id="runeL" class="rune">Œõ</div>
        </div>
        <div class="cube-face back">
          <p>Align the dial to ‚òÖ</p>
          <input type="range" id="dial" min="0" max="5" value="0">
          <div id="runeD" class="rune">‚ú¶</div>
        </div>
        <div class="cube-face right">
          <p>Unscramble: "RAEL"</p>
          <input type="text" id="wordInput" placeholder="Your answer">
          <div id="runeW" class="rune">Œ®</div>
        </div>
        <div class="cube-face left">
          <p>Trace the hidden path</p>
          <div id="labyrinthGrid">
            <!-- 5x5 grid -->
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
            <div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div><div class="cell"></div>
          </div>
          <div id="runeM" class="rune">Œ©</div>
        </div>
        <div class="cube-face top">
          <p>Repeat the sequence</p>
          <button id="startMemory">Start</button>
          <div id="memoryButtons">
            <button class="mem" data-val="0">‚ñ≤</button>
            <button class="mem" data-val="1">‚óÜ</button>
            <button class="mem" data-val="2">‚öô</button>
          </div>
          <div id="runeS" class="rune">Œ£</div>
        </div>
        <div class="cube-face bottom">
          <p>Select numbers to sum to 15</p>
          <div id="mathGrid">
            <button class="num">4</button><button class="num">7</button>
            <button class="num">2</button><button class="num">8</button><button class="num">5</button>
          </div>
          <div id="runeN" class="rune">Œ¶</div>
        </div>
      </div>
    </div>
  </div>

  <p id="unlockMessage" style="display:none;">‚ú® The Labyrinth Cube Unlocks! ‚ú®</p>
</div>

    <!-- Final Branch -->
    <div id="finalBranchPanel" class="panel-shell" style="display:none;">
      <h2>Final Branch</h2>
      <p>Your final password is: <strong id="revealedPassword">QUBE-ACCESS-777</strong></p>
      <button id="toFinalClearanceBtn">Proceed to Final Clearance Qube</button>
    </div>

    <!-- Final Clearance Chamber -->
    <div id="finalClearancePanel" class="panel-shell" style="display:none;">
      <h2 class="mystery-title">Puzzle Box Mechanism</h2>
      <div class="glowing-cube"></div>
      <p>Enter the final clearance code to unlock the Superform.</p>
      <input id="finalClearanceCode" type="password" placeholder="Re-enter final code" />
      <button id="finalClearanceBtn">Unlock</button>
      <p id="finalClearanceStatus"></p>
    </div>

    <!-- Superform chamber -->
    <div id="mysteryBoxPanel" class="panel-shell" style="display:none; border-color: var(--violet); box-shadow: inset 0 0 25px rgba(0,0,0,0.8), 0 0 20px rgba(138,43,226,0.6);">
      <h2 class="mystery-title">Super Level Access</h2>
      <div class="mystery-crest">‚ôõ ‚öö ‚üÅ</div>
      <div class="cube-aura" aria-hidden="true"></div>
      <form id="superLevelForm" onsubmit="return submitSuperForm();">
        <!-- Sigil watermark behind form -->
  <div class="panel-sigil"></div>
        <!-- Frost overlay layer -->
  <div class="frost-overlay"></div>
        <label for="superName">Account Holder</label>
        <input id="superName" name="superName" required type="text" />
        <label for="superTier">Tier</label>
        <select id="superTier" name="superTier" required>
          <option value="Sovereign">Sovereign</option>
          <option value="Luminary">Luminary</option>
          <option value="Legacy">Legacy Tier</option>
        </select>
        <label for="superCode">Clearance Code</label>
        <input id="superCode" name="superCode" required type="password" />
        <button type="submit">Submit Super-Level Form</button>
        <p id="superFormStatus"></p>
      </form>
    </div>

    <!-- Verification plaque -->
    <div class="verification-plaque" id="verificationPlaque">
      <p>Copy this verification text and paste it into the official Prestige Verification Form:</p>
      <textarea id="verificationText" readonly></textarea>
      <button type="button" onclick="copyVerification()">üìã Copy Verification Text</button>
    </div>
  </div>

  <!-- Crest shortcut -->
  <div class="floating-crest" onclick="unlockSuperForm()" title="Unlock Super Form"></div>

  <!-- Blogger iframe target -->
  <iframe name="hidden_iframe" style="display:none;"></iframe>

  <!-- Tap shimmer + zones -->
  <div class="tap-shimmer" id="tapShimmer"></div>
  <div id="tapTopLeft" class="tap-zone" aria-hidden="true"></div>
  <div id="tapTopRight" class="tap-zone" aria-hidden="true"></div>
<div id="puzzleNotice">
  üì± For true Puzzle Box engagement, reduce your screen size to 50% on mobile.
</div>
<script>
/* =========================
   Prestige Triumph ‚Äî Merged Script
   Single-file canonical copy (paste into your page)
   ========================= */

/* ===== Panel helpers ===== */
function showPanel(id){ const el=document.getElementById(id); if(el) el.style.display='block'; }
function hidePanel(id){ const el=document.getElementById(id); if(el) el.style.display='none'; }

/* ===== Clipboard for verification plaque ===== */
function copyVerification() {
  const textArea = document.getElementById("verificationText");
  if (!textArea) return;
  textArea.select();
  textArea.setSelectionRange(0, 99999);
  try { document.execCommand("copy"); } catch(e) { /* ignore */ }
  alert("Verification text copied. Please paste it into the Google Form field.");
}

/* ===== Utility helpers ===== */
function shuffleArray(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}
function arraysMatch(a, b) {
  if (a.length !== b.length) return false;
  for (let i = 0; i < a.length; i++) if (a[i] !== b[i]) return false;
  return true;
}

/* ===== Name generators (public + admin) ===== */
function generateTieredName(tier) {
  const pools = {
    Initiate: { names:[ "Lena","Jamal","Sofia","Kai","Maya","Aria","Jonas","Clara","Mateo","Nora","Ethan","Layla","Owen","Iris","Caleb","Zoe","Lucas","Amira","Noah","Elise","Ravi","Chloe","Daniel","Isla","Micah"], suffixes:["of the Welcome Ledger","of the First Entry","of the Community Fold","of the Opening Gate","of the Dawn Register","of the Entry Scroll","of the Common Hall","of the First Circle","of the Hearth Record","of the Entryway","of the Shared Beginning","of the Welcome Chamber","of the Initial Archive","of the Entry Crest","of the Common Ledger","of the First Bond","of the Entry Tier","of the Hearth Fold","of the Welcome Archive","of the Entry Seal"] },
    Steward: { names:[ "Elias","Priya","Malcolm","Zara","Omar","Jonah","Fatima","Marcus","Leila","Hassan","Claudia","Rafael","Nadia","Victor","Amal","Simone","Darius","Farah","Julien","Anika","Mateo","Selene","Harun","Lucia","Khalid"], suffixes:["of the Civic Watch","of the Shared Archive","of the Stewardship Line","of the Civic Chamber","of the Guardian Fold","of the Civic Register","of the Watchful Tier","of the Civic Crest","of the Steward‚Äôs Bond","of the Civic Archive","of the Guardian Ledger","of the Civic Seal","of the Stewardship Archive","of the Civic Scroll","of the Watch Chamber","of the Civic Fold","of the Stewardship Crest","of the Civic Tier","of the Guardian Archive","of the Civic Authority"] },
    Neighbor: { names:[ "Ava","Noah","Grace","Leo","Isla","Hugo","Mila","Samir","Clara","Julian","Tara","Felix","Nina","Oscar","Amira","Eli","Sienna","Mateo","Lila","Jonas","Raya","Victor","Nora","Arjun","Elena"], suffixes:["of the Local Registry","of the Neighborhood Tier","of the Common Fold","of the Shared Street","of the Neighbor‚Äôs Archive","of the Local Crest","of the Common Ledger","of the Hearth Tier","of the Local Archive","of the Neighbor‚Äôs Bond","of the Shared Ledger","of the Local Scroll","of the Common Register","of the Neighbor‚Äôs Seal","of the Local Fold","of the Shared Archive","of the Hearth Crest","of the Local Tier","of the Neighbor‚Äôs Archive","of the Common Authority"] },
    Contributor: { names:[ "Milan","Tessa","Jude","Nina","Arlo","Ravi","Clara","Jonas","Elise","Mateo","Amira","Daniel","Layla","Owen","Iris","Chloe","Lucas","Noah","Zoe","Micah","Anya","Victor","Nora","Julien","Farah"], suffixes:["of the Support Ledger","of the Contributor Line","of the Community Archive","of the Shared Ledger","of the Contribution Crest","of the Support Archive","of the Contributor‚Äôs Bond","of the Community Fold","of the Support Register","of the Contribution Seal","of the Contributor‚Äôs Archive","of the Support Scroll","of the Community Ledger","of the Contribution Tier","of the Support Crest","of the Contributor‚Äôs Fold","of the Community Seal","of the Contribution Archive","of the Support Tier","of the Contributor‚Äôs Authority"] },
    Observer: { names:[ "Theo","Luna","Miles","Ivy","Rowan","Clara","Jonas","Elise","Mateo","Amira","Daniel","Layla","Owen","Iris","Chloe","Lucas","Noah","Zoe","Micah","Anya","Victor","Nora","Julien","Farah","Simone"], suffixes:["of the Quiet Watch","of the Passive Tier","of the Ledger Periphery","of the Silent Archive","of the Watchful Crest","of the Quiet Register","of the Passive Fold","of the Ledger Edge","of the Silent Ledger","of the Watch Chamber","of the Quiet Seal","of the Passive Archive","of the Ledger Scroll","of the Silent Crest","of the Watch Archive","of the Quiet Tier","of the Passive Ledger","of the Ledger Crest","of the Silent Fold","of the Watch Authority"] },
    Supporter: { names:[ "Elena","Caleb","Raya","Finn","Naomi","Jonas","Clara","Mateo","Nora","Amira","Daniel","Layla","Owen","Iris","Chloe","Lucas","Noah","Zoe","Micah","Anya","Victor","Nora","Julien","Farah","Simone"], suffixes:["of the Advocacy Fold","of the Support Tier","of the Donor Registry","of the Patron‚Äôs Archive","of the Support Crest","of the Advocacy Ledger","of the Donor‚Äôs Bond","of the Support Archive","of the Patron‚Äôs Fold","of the Advocacy Scroll","of the Support Register","of the Donor‚Äôs Seal","of the Patron‚Äôs Ledger","of the Advocacy Tier","of the Support Authority","of the Donor‚Äôs Archive","of the Patron‚Äôs Crest","of the Advocacy Archive","of the Support Seal","of the Donor‚Äôs Authority"] },
    Archivist: { names:[ "Solenne","Idris","Helena","Lucan","Amara","Jonas","Clara","Mateo","Nora","Amira","Daniel","Layla","Owen","Iris","Chloe","Lucas","Noah","Zoe","Micah","Anya","Victor","Nora","Julien","Farah","Simone"], suffixes:["of the Memory Vault","of the Archivist Line","of the Tiered Archive","of the Record Chamber","of the Archive Crest","of the Memory Ledger","of the Archivist‚Äôs Bond","of the Tiered Ledger","of the Record Scroll","of the Archive Seal","of the Memory Archive","of the Archivist‚Äôs Fold","of the Tiered Register","of the Record Archive","of the Archive Authority","of the Memory Crest","of the Archivist‚Äôs Archive","of the Tiered Seal","of the Record Ledger","of the Archive Tier"] }
  };
  const pool = pools[tier] || pools.Initiate;
  const name = pool.names[Math.floor(Math.random() * pool.names.length)];
  const suffix = pool.suffixes[Math.floor(Math.random() * pool.suffixes.length)];
  return `${name} ${suffix}`;
}
function generateNameFromTier() {
  const tier = document.getElementById('role')?.value;
  if (!tier) { alert('Please select a tier first.'); return; }
  document.getElementById('name').value = generateTieredName(tier);
}

/* Admin specialized name generator */
function generateAdminSpecializedName(tier) {
  const pools = {
    Admin: { names:["Xyric","Velonar","Kaelith","Druvenor","Myrosan","Tavricus","Zerath","Olyren","Nerith","Solvion"], suffixes:["of the Gate Sigil","of the Iron Seal","of the Hidden Ledger","of the Crown Archive","of the Watch Spire"] },
    MasterAdmin: { names:["Solvarn","Eryndor","Calethor","Thyrosan","Lumielor","Varrosan","Aurethor","Calyrian","Therion","Vaelor"], suffixes:["of the Eternal Crown","of the Master Seal","of the Oversight Chamber","of the Sovereign Archive","of the Prime Ledger"] },
    Overseer: { names:["Maraven","Oristar","Kyreth","Valmor","Serath","Ilyrion","Drevan","Koriel","Navros","Pelior"], suffixes:["of the Panoptic Tier","of the Vigil Crest","of the Oversight Watch","of the Long View","of the Sentinel Ledger"] },
    Controller: { names:["Branth","Cyris","Tavren","Morix","Elion","Kadroth","Fenlor","Rystan","Ulric","Veldor"], suffixes:["of the Axis Chamber","of the Control Seal","of the Switch Crest","of the Relay Archive","of the Circuit Ledger"] },
    Custodian: { names:["Amaret","Soriel","Bastin","Eldra","Hamon","Lethir","Norian","Pelra","Quenel","Serin"], suffixes:["of the Keep Fold","of the Vault Seal","of the Memory Hold","of the Chamber Keys","of the Archive Lock"] },
    Guardian: { names:["Rhaeth","Galenor","Mireth","Thalen","Corvus","Eryx","Jorrel","Kaeth","Lorik","Serros"], suffixes:["of the Shield Line","of the Gate Ward","of the Crest Watch","of the Hall Guard","of the Bastion Seal"] },
    Sentinel: { names:["Ariste","Caden","Delys","Ferox","Ithar","Kynos","Lyren","Maelor","Nestor","Pyron"], suffixes:["of the Upper Watch","of the Quiet Keep","of the Night Vigil","of the Sight Line","of the Lamp Crest"] },
    Supervisor: { names:["Renvar","Tessan","Orwyn","Marella","Dorian","Helis","Karaen","Leoris","Navor","Selyn"], suffixes:["of the Line Ledger","of the Flow Tier","of the Review Crest","of the Pattern Scroll","of the Rhythm Archive"] },
    Coordinator: { names:["Arion","Belis","Coraen","Demin","Elvar","Faryn","Galius","Heryn","Islor","Jalara"], suffixes:["of the Node Tier","of the Thread Ledger","of the Mesh Crest","of the Lattice Archive","of the Sequence Seal"] },
    Director: { names:["Callion","Drexor","Eamon","Fiora","Helion","Ivara","Jorik","Kaelis","Lyraen","Mavros"], suffixes:["of the Arc Chamber","of the Prime Tier","of the Guiding Seal","of the Lineage Archive","of the Crest Ledger"] },
    Chancellor: { names:["Aurel","Beren","Cyral","Demos","Elara","Fidel","Galen","Helia","Isran","Joriel"], suffixes:["of the Council Seal","of the Civic Crest","of the Scroll Authority","of the Ledger Court","of the Archive Seat"] },
    Prefect: { names:["Ardan","Basile","Cyrion","Delios","Ephra","Feron","Gaius","Helor","Iason","Jaryn"], suffixes:["of the Order Seal","of the Hall Rule","of the Crest Codex","of the Tier Decree","of the Ledger Law"] },
    Warden: { names:["Brenor","Cadal","Dethis","Eryon","Faelis","Gorath","Halden","Ivern","Jareth","Kalen"], suffixes:["of the Gate Hold","of the Lock Tier","of the Bar Crest","of the Guard Archive","of the Seal Chain"] },
    Marshal: { names:["Caldris","Dorian","Eryx","Faelor","Gareth","Harion","Jalen","Korath","Lyris","Mavren"], suffixes:["of the Banner Line","of the Crest March","of the Field Seal","of the Standard Archive","of the Rally Ledger"] },
    Commander: { names:["Corvin","Darex","Eidon","Feran","Galen","Hector","Ilyon","Jaro","Kaelis","Leron"], suffixes:["of the Legion Crest","of the Column Seal","of the Order March","of the Line Archive","of the Command Ledger"] },
    Principal: { names:["Alestor","Bryn","Calyx","Demos","Eland","Fiora","Galen","Helis","Ionar","Jarin"], suffixes:["of the Ledger Seat","of the Crest Chair","of the Prime Scroll","of the Tier Authority","of the Archive Root"] },
    Chief: { names:["Avar","Bastion","Cairn","Dorel","Evanor","Ferran","Garran","Helion","Ithar","Jaro"], suffixes:["of the Crest Line","of the Root Ledger","of the Core Seal","of the Upper Archive","of the Crown Scroll"] },
    SovereignAdmin: { names:["Solvarn","Aurion","Calther","Eryndor","Lumiel","Thyros","Varros","Xerion","Ylath","Zevran"], suffixes:["of the Sovereign Crown","of the Eternal Seal","of the Prime Archive","of the Royal Ledger","of the High Chamber"] },
    LegacyAdmin: { names:["Arion","Belor","Cyris","Drevan","Elion","Faryn","Galen","Helor","Ilyas","Jorren"], suffixes:["of the Legacy Archive","of the Elder Seal","of the Ancestral Ledger","of the Memory Court","of the Root Chamber"] }
  };
  const pool = pools[tier] || pools.Admin;
  const name = pool.names[Math.floor(Math.random() * pool.names.length)];
  const suffix = pool.suffixes[Math.floor(Math.random() * pool.suffixes.length)];
  return `${name} ${suffix}`;
}

/* ===== Blogger helpers and unified submission ===== */
function generateCardID() { return 'CARD-' + Math.random().toString(36).substr(2, 8).toUpperCase(); }
function generateAccessCode() { return 'ACCESS-' + Math.floor(100000 + Math.random() * 900000); }

/*
  submitToBlogger options:
   - name, phone, messageForBlogger, plaqueMessage, clearanceCode, accessCode, email, redirectURL
  Preferred flow: hiddenBloggerForm (hbName/hbPhone/hbMessage/hbEmail) if present.
  Plaque displays plaqueMessage (must not include sensitive access code).
*/
function submitToBlogger({ name, phone = '', messageForBlogger = '', plaqueMessage = '', clearanceCode = '', accessCode = '', email = "prestige@triumph.org", redirectURL = '' }) {
  try {
    const cardMatch = messageForBlogger.match(/Account ID:\s*(\S+)/);
    const registry = JSON.parse(localStorage.getItem('userRegistry')) || {};
    registry[name] = {
      role: (messageForBlogger.match(/Tier:\s*(.+)/) || [])[1] || '',
      phone,
      card: cardMatch ? cardMatch[1] : '',
      clearanceCode: clearanceCode || '',
      accessCode: accessCode || '',
      created: Date.now(),
      activated: false
    };
    localStorage.setItem('userRegistry', JSON.stringify(registry));
  } catch (e) { /* non-blocking */ }

  const hiddenForm = document.getElementById('hiddenBloggerForm');
  const hbName = document.getElementById('hbName');
  const hbPhone = document.getElementById('hbPhone');
  const hbMessage = document.getElementById('hbMessage');
  const hbEmail = document.getElementById('hbEmail');

  if (hiddenForm && hbName && hbMessage && hbEmail) {
    hbName.value = name;
    if (hbPhone) hbPhone.value = phone;
    hbMessage.value = messageForBlogger;
    hbEmail.value = email;
    try { hiddenForm.requestSubmit ? hiddenForm.requestSubmit() : hiddenForm.submit(); } catch (err) { hiddenForm.submit(); }
  } else {
    const legacyName = document.getElementById('name');
    const legacyPhone = document.getElementById('phone');
    const legacyMsg = document.getElementById('message');
    const legacyEmail = document.getElementById('bloggerEmail');
    if (legacyName) legacyName.value = name;
    if (legacyPhone) legacyPhone.value = phone;
    if (legacyMsg) legacyMsg.value = messageForBlogger;
    if (legacyEmail) legacyEmail.value = email;
    const loveForm = document.getElementById('love-form');
    if (loveForm) {
      try { loveForm.requestSubmit ? loveForm.requestSubmit() : loveForm.submit(); } catch (err) { loveForm.submit(); }
    }
  }

  const plaque = document.getElementById('verificationPlaque');
  const vText = document.getElementById('verificationText');
  if (plaque && vText) {
    vText.value = plaqueMessage;
    plaque.style.display = 'block';
  }

  if (redirectURL) {
    setTimeout(() => { window.location.href = redirectURL; }, 1000);
  }
}

/* ===== Public form submit ===== */
function submitCeremonialForm() {
  const name = (document.getElementById('name')?.value || '').trim();
  const phone = (document.getElementById('phone')?.value || '').trim();
  const role = (document.getElementById('role')?.value || '').trim();
  const card = generateCardID();

  const messageForBlogger = `ü´§ Prestige Triumph Verification
üë§ Name: ${name}
üìû Phone: ${phone}
üéñ Tier: ${role}
üÜî Account ID: ${card}`.trim();

  const plaqueMessage = messageForBlogger;
  const redirectURL = `https://mrhim00.blogspot.com/2025/10/issued.html?card=${encodeURIComponent(card)}`;

  submitToBlogger({ name, phone, messageForBlogger, plaqueMessage, clearanceCode: '', accessCode: '', redirectURL });
  return false;
}

/* ===== Crest unlock shortcut (Superform) ===== */
function unlockSuperForm() {
  showPanel('mysteryBoxPanel');
  const name = document.getElementById('name')?.value.trim();
  if (name) document.getElementById('superName').value = name;
  alert("Super-level access form unlocked.");
}

/* ===== Tap shimmer and admin mobile unlock ===== */
let shimmerTimer;
function shimmerPulse(){
  const s=document.getElementById('tapShimmer'); if(!s) return;
  s.classList.add('active');
  clearTimeout(shimmerTimer);
  shimmerTimer=setTimeout(()=>s.classList.remove('active'),260);
}
let adminTapSequence=[]; let adminTapResetTimer;
function resetAdminTap(){ adminTapSequence=[]; clearTimeout(adminTapResetTimer); }
function checkAdminMobileUnlock(){
  const correct=['tapTopLeft','tapTopRight'];
  if(adminTapSequence.join(',')===correct.join(',')){
    showPanel('adminForm'); shimmerPulse(); resetAdminTap();
    const hint=document.getElementById('tapHint'); if(hint) hint.textContent="Admin gate unlocked. Verify your tier.";
  } else {
    adminTapResetTimer=setTimeout(resetAdminTap,8000);
  }
}
document.getElementById('tapTopLeft')?.addEventListener('click',()=>{ adminTapSequence.push('tapTopLeft'); shimmerPulse(); checkAdminMobileUnlock(); });
document.getElementById('tapTopRight')?.addEventListener('click',()=>{ adminTapSequence.push('tapTopRight'); shimmerPulse(); checkAdminMobileUnlock(); });

/* ===== Admin tier codes ===== */
const TIER_CODES = {
  Admin:"A-231-GATE", MasterAdmin:"M-Q8/-CROWN", Overseer:"OVR-442-SIGHT", Controller:"CTRL-993-AXIS",
  Custodian:"CUST-118-KEEP", Guardian:"GUARD-775-SHIELD", Sentinel:"SENT-560-WATCH", Supervisor:"SUP-823-LINE",
  Coordinator:"COORD-237-NODE", Director:"DIR-901-ARC", Chancellor:"CHANC-314-SEAL", Prefect:"PREF-628-ORDER",
  Warden:"WARD-452-GATE", Marshal:"MAR-739-BANNER", Commander:"COMM-888-LEGION", Principal:"PRINC-505-LEDGER",
  Chief:"CHIEF-272-CREST", SovereignAdmin:"SOV-999-CROWN", LegacyAdmin:"LEG-777-ARCHIVE"
};
const HIDDEN_CODE = "X-719-BOX";

let ceremonyName = "";
let superSequence = []; // ritual grid input record
let tapLog = [];        // ritual grid feedback map

/* ===== Admin bindings ===== */
document.getElementById('adminGenNameBtn')?.addEventListener('click', () => {
  const tier = document.getElementById('adminTier').value || 'Admin';
  const generated = generateAdminSpecializedName(tier);
  ceremonyName = generated;
  document.getElementById('adminName').value = generated;
  const inRitual = document.getElementById('nameInRitual');
  if (inRitual) inRitual.textContent = generated;
});

function handleAdminAccess(isVerifyClick=false) {
  const tier = document.getElementById('adminTier').value;
  const code = (document.getElementById('adminCode').value || '').trim();
  const name = ceremonyName || document.getElementById('adminName').value.trim();
  const phone = document.getElementById('adminPhone')?.value.trim() || '';
  const status = document.getElementById('verifyStatus');
  const expectedCode = TIER_CODES[tier];

  if (!expectedCode) { if (status) status.textContent = "‚ùå Unknown tier selected."; return false; }
  if (code !== expectedCode && !(tier === "Admin" || tier === "MasterAdmin")) {
    if (status) status.textContent = `‚ùå Invalid clearance code for ${tier}.`; return false;
  }

  if (tier === "Admin" || tier === "MasterAdmin") {
    if (isVerifyClick) {
      if (status) status.textContent = "‚úÖ Clearance accepted. Unlocking ritual sequence...";
      ['colorPanel','superCodePanel','puzzleBoxPanel','finalClearancePanel','mysteryBoxPanel','finalBranchPanel'].forEach(hidePanel);
      showPanel('colorPanel');
      buildRitualGrid();
    } else {
      if (status) status.textContent = "Use Verify button for Admin/MasterAdmin.";
    }
    return false;
  }

  // Non-Admin tiers -> Blogger route (generate card + access code, store locally, send access code to Blogger)
  const card = generateCardID();
  const accessCode = generateAccessCode();
  const clearanceCode = expectedCode; // stored locally

  const messageForBlogger = `üîê Admin Access Submission
üë§ Name: ${name}
üìû Phone: ${phone || '‚Äî'}
üéñ Tier: ${tier}
üÜî Account ID: ${card}
üîë Access Code: ${accessCode}`.trim();

  const plaqueMessage = `üîê Admin Access Submission
üë§ Name: ${name}
üéñ Tier: ${tier}
üÜî Account ID: ${card}`.trim(); // plaque excludes access code

  const redirectURL = `https://mrhim00.blogspot.com/2025/10/issued.html?card=${encodeURIComponent(card)}`;

  submitToBlogger({
    name, phone,
    messageForBlogger, plaqueMessage,
    clearanceCode, accessCode, redirectURL
  });

  alert("Admin form submitted. Redirecting...");
  return false;
}
document.getElementById('adminForm')?.addEventListener('submit', (e)=>{ e.preventDefault(); handleAdminAccess(false); });
document.querySelector('#adminForm #verifyTierBtn')?.addEventListener('click', ()=>handleAdminAccess(true));
document.getElementById('adminCode')?.addEventListener('input', ()=>{
  const tierSel = document.getElementById('adminTier').value;
  const code = document.getElementById('adminCode').value.trim();
  const verifyBtn = document.querySelector('#adminForm #verifyTierBtn');
  if (!verifyBtn) return;
  if ((tierSel === 'Admin' && code === TIER_CODES.Admin) || (tierSel === 'MasterAdmin' && code === TIER_CODES.MasterAdmin)) {
    verifyBtn.style.display = 'block';
  } else verifyBtn.style.display = 'none';
});

/* ===== Ritual Grid (Color Sequence) ===== */
let requiredSequence = [];
function buildRitualGrid(){
  const panel = document.getElementById('panelButtons'); if(!panel) return;
  panel.innerHTML = "";
  const colors  = ["red","blue","green","mustard","violet","cyan","deepred","emerald","deepviolet"];
  const glyphs  = ["‚üü","œû","‚üÅ","‚ßñ","·ö†","Œ∂","‚Ç£","‚üä","‚öö","‚ôõ","‚ß´"];
  const numbers = ["231","85/","V2Œ∂","‚Ç£2","77X","9√ò","31Œî","8.98","27$","719"];

  requiredSequence = shuffleArray(colors).slice(0,4);
  superSequence = []; tapLog = [];
  renderSequence(); updateIndicators();

  colors.forEach(c=>{
    const btn = document.createElement('button');
    btn.type = "button";
    btn.className = "rune-btn " + c;
    const sigil = glyphs[Math.floor(Math.random()*glyphs.length)];
    const num   = numbers[Math.floor(Math.random()*numbers.length)];
    btn.innerHTML = `<span class="sigil">${sigil}</span><small>${num}</small>`;
    btn.addEventListener('click', ()=>handleRitualTap(c, btn));
    panel.appendChild(btn);
  });

  const ritualVerify = document.querySelector('#colorPanel .ritual-controls button:nth-child(1)');
  const ritualClear  = document.querySelector('#colorPanel .ritual-controls button:nth-child(2)');
  if (ritualVerify && !ritualVerify.dataset.wired) {
    ritualVerify.dataset.wired = '1';
    ritualVerify.addEventListener('click', verifySequenceAttempt);
  }
  if (ritualClear && !ritualClear.dataset.wired) {
    ritualClear.dataset.wired = '1';
    ritualClear.addEventListener('click', clearSequence);
  }
}
function handleRitualTap(color, btn){
  superSequence.push(color);
  tapLog.push({ color, btn });
  renderSequence();
  btn.classList.toggle('active');
  updateIndicators();
  btn.classList.add('glow');
  setTimeout(()=>btn.classList.remove('glow'),1200);
}
function renderSequence(){
  const sequenceReadout = document.getElementById('sequenceReadout'); if(!sequenceReadout) return;
  const text = superSequence.length ? superSequence.join('~') : '----';
  sequenceReadout.textContent = '';
  let i = 0;
  const interval = setInterval(() => {
    sequenceReadout.textContent += text[i] || '';
    i++;
    if (i >= text.length) clearInterval(interval);
  }, 40);
}
function updateIndicators() {
  const indicators = document.querySelectorAll('#indicatorLines span');
  indicators.forEach((bar, i) => {
    if (i < superSequence.length) bar.classList.add('active'); else bar.classList.remove('active');
  });
}
function verifySequenceAttempt(){
  const attemptColors = superSequence.slice(0,4);
  const attemptTaps   = tapLog.slice(0,4);
  const correct = arraysMatch(attemptColors, requiredSequence);

  const sequenceReadout = document.getElementById('sequenceReadout');
  if (correct) {
    sequenceReadout.textContent = "ACCESS GRANTED >> ACCESS PANEL";
    sequenceReadout.style.color = "#6aff6a";
    hidePanel('colorPanel');
    showPanel('superCodePanel');
    const nameInPuzzle = document.getElementById('nameInPuzzle');
    const nameInRitual = document.getElementById('nameInRitual');
    if (nameInPuzzle && nameInRitual) nameInPuzzle.textContent = nameInRitual.textContent;
  } else {
    sequenceReadout.textContent = "ACCESS DENIED";
    sequenceReadout.style.color = "#ff4a4a";
  }

  attemptTaps.forEach(({ color, btn }, i) => {
    btn.classList.remove('after-correct','after-wrong');
    if (color === requiredSequence[i]) {
      btn.classList.add('after-correct');
      setTimeout(() => btn.classList.remove('after-correct'), 4000);
    } else {
      btn.classList.add('after-wrong');
      setTimeout(() => btn.classList.remove('after-wrong'), 1200);
    }
  });

  superSequence = [];
  tapLog = [];
  updateIndicators();
}
function clearSequence(){
  superSequence = [];
  tapLog = [];
  renderSequence();
  document.querySelectorAll('#panelButtons .rune-btn').forEach(btn => {
    btn.classList.remove('active','after-correct','after-wrong','glow');
  });
  updateIndicators();
}

/* ===== Super Code Panel -> Mystery Box ===== */
document.getElementById('accessConfirmBtn')?.addEventListener('click', () => {
  const v = document.getElementById('accessCodeInput').value.trim().toUpperCase();
  const s = document.getElementById('accessCodeStatus');
  if (v === HIDDEN_CODE) {
    if (s) s.textContent = '‚úÖ Code accepted. Proceeding to Mystery Box...';
    setTimeout(() => { hidePanel('superCodePanel'); showPanel('mysteryBoxChamber'); }, 600);
  } else {
    if (s) s.textContent = '‚ùå Incorrect code.';
  }
});

/* ===== Mystery Box -> Puzzle Box entry ===== */
document.getElementById('attemptPuzzleBtn')?.addEventListener('click', () => {
  hidePanel('mysteryBoxChamber');
  showPanel('puzzleBoxPanel');
  initPuzzleBox();
});

/* ====== Minigames consolidated and hardened ====== */

/* ===== Restored Puzzle Box ‚Äî compatible with original layout ===== */

/* Shared state (single canonical copy) */
let puzzleInitDone = false;
let cubeUnlocked = false;
let keys = { L:false, D:false, W:false, M:false, S:false, N:false };

/* short element lookup */
const $ = id => document.getElementById(id);

/* Mobile shrink/notice (keeps original UX) */
function showPuzzleNotice(){
  const notice = $('puzzleNotice');
  if (!notice) return;
  if (window.innerWidth <= 768) {
    notice.classList.add('show');
    setTimeout(()=> notice.classList.remove('show'), 6000);
  }
}
function shrinkPuzzleBox(){
  const shell = $('puzzleBoxPanel') || $('imgVoidPuzzle');
  if (shell && window.innerWidth <= 768) { shell.classList.add('shrunk'); showPuzzleNotice(); }
}
function restorePuzzleBox(){
  const shell = $('puzzleBoxPanel') || $('imgVoidPuzzle');
  if (shell) shell.classList.remove('shrunk');
}

/* Cube pulse + unlock (keeps original behaviour) */
function pulseCube(){
  const cube = $('labyrinthCube');
  if (!cube) return;
  cube.style.boxShadow = "0 0 40px rgba(0,245,181,0.6)";
  setTimeout(()=>{ if (cube) cube.style.boxShadow = "none"; }, 900);
}
function checkCubeUnlock(){
  if (Object.values(keys).every(v => v) && !cubeUnlocked){
    cubeUnlocked = true;
    const msg = $('unlockMessage'); if (msg) msg.style.display = 'block';
    const sigil = $('hiddenSigil'); if (sigil) sigil.style.display = 'block';
    const voidEl = $('imgVoidPuzzle'); if (voidEl) voidEl.classList.add('unlocked');
    pulseCube();

    // mirror original timing: fade then navigate
    setTimeout(()=>{ if(sigil) sigil.classList.add('fadeOut'); const cube = $('labyrinthCube'); if(cube) cube.classList.add('fadeOut'); }, 30000);
    setTimeout(()=>{
      hidePanel('puzzleBoxPanel'); showPanel('finalBranchPanel');
      const cube = $('labyrinthCube'); if (cube) cube.classList.remove('fadeOut');
      if (sigil) { sigil.style.display='none'; sigil.classList.remove('fadeOut'); }
      const voidEl2 = $('imgVoidPuzzle'); if (voidEl2) voidEl2.classList.remove('unlocked');
      restorePuzzleBox();
    }, 60000);
  }
}

/* Reset visuals (original style) */
function resetPuzzleState(){
  keys = { L:false, D:false, W:false, M:false, S:false, N:false };
  cubeUnlocked = false;

  document.querySelectorAll('#lightsGrid .light-cell').forEach(c => { c.classList.remove('on'); c.style.background=''; c.style.boxShadow=''; });
  document.querySelectorAll('#labyrinthGrid .cell').forEach(c => c.classList.remove('on'));
  document.querySelectorAll('#memoryButtons .mem').forEach(btn => btn.classList.remove('flash'));
  ['runeL','runeD','runeW','runeM','runeS','runeN'].forEach(id => { const el = $(id); if(el) el.style.display = 'none'; });
  const msg = $('unlockMessage'); if (msg) msg.style.display = 'none';
  const dialEl = $('dial'); if(dialEl) { try { dialEl.value = 0; } catch(e){} }
}

/* Idempotent wiring helper to avoid duplicate listeners */
function onceWire(el, key, fn){
  if (!el) return;
  if (el.dataset[key]) return;
  el.dataset[key] = "1";
  fn();
}

/* ===== The original, proven puzzle logic (restored) ===== */

function initPuzzleBox_originalLayout(){
  // If we've wired once already just reset state and shrink -> same UX as original
  if (puzzleInitDone){
    resetPuzzleState();
    shrinkPuzzleBox();
    return;
  }

  /* ---------- Lights (original) ---------- */
  const lights = [...document.querySelectorAll('#lightsGrid .light-cell')];
  if (lights.length){
    // wire each cell once
    lights.forEach((cell, idx) => {
      onceWire(cell, 'lights', () => {
        cell.addEventListener('click', () => {
          // neighbor toggles using the static grid pattern used originally
          [idx, idx-1, idx+1, idx-3, idx+3].forEach(i => { if (lights[i]) lights[i].classList.toggle('on'); });
          // solved condition uses "all on" like original
          if ([...lights].every(c => c.classList.contains('on'))){
            keys.L = true;
            const el = $('runeL'); if (el) el.style.display = 'block';
            pulseCube(); checkCubeUnlock();
          }
        });
      });
    });
  }

  /* ---------- Dial (original simple numeric check) ---------- */
  // Original layout used a numeric lower dial and instruction "Start at 3 (CW ... 75)" ‚Äî restore simple check
  const dial = $('dial'); // numeric input or small dial element in your original layout
  if (dial) {
    onceWire(dial, 'dial', () => {
      // original behavior: start at 3 (CW), accepted when value becomes 3 (you can adapt)
      dial.addEventListener('input', (e) => {
        const v = parseInt(e.target.value, 10);
        if (!Number.isNaN(v) && v === 3) {
          if (!keys.D){
            keys.D = true;
            const el = $('runeD'); if (el) el.style.display = 'block';
            pulseCube(); checkCubeUnlock();
          }
        }
      });
      // also support change event for elements that emit 'change'
      dial.addEventListener('change', (e) => {
        const v = parseInt(e.target.value, 10);
        if (!Number.isNaN(v) && v === 3) {
          if (!keys.D){
            keys.D = true;
            const el = $('runeD'); if (el) el.style.display = 'block';
            pulseCube(); checkCubeUnlock();
          }
        }
      });
    });
  }

  /* ---------- Word Lock (original: "real") ---------- */
  const wordInput = $('wordInput');
  if (wordInput){
    onceWire(wordInput, 'word', () => {
      wordInput.addEventListener('change', (e) => {
        if ((e.target.value || '').trim().toLowerCase() === 'real'){
          if (!keys.W){
            keys.W = true;
            const el = $('runeW'); if (el) el.style.display = 'block';
            pulseCube(); checkCubeUnlock();
          }
        }
      });
    });
  }

  /* ---------- Labyrinth Path (original fixed path) ---------- */
  const labCells = [...document.querySelectorAll('#labyrinthGrid .cell')];
  if (labCells.length){
    // original working path used by you: [0,1,6,11,16,17,18,23,24]
    const path = [0,1,6,11,16,17,18,23,24];
    let progress = 0;
    labCells.forEach((cell, idx) => {
      onceWire(cell, 'lab', () => {
        cell.addEventListener('click', () => {
          if (idx === path[progress]) {
            cell.classList.add('on'); progress++;
            if (progress === path.length){
              keys.M = true;
              const el = $('runeM'); if (el) el.style.display = 'block';
              pulseCube(); checkCubeUnlock();
            }
          } else {
            labCells.forEach(c => c.classList.remove('on'));
            progress = 0;
          }
        });
      });
    });
  }

  /* ---------- Memory (Simon) simplified original) ---------- */
  const memBtns = [...document.querySelectorAll('#memoryButtons .mem')];
  const startBtn = $('startMemory');
  if (memBtns.length && startBtn){
    let memSeq = [], playerSeq = [], playing = false;
    const flash = (btn) => { btn.classList.add('flash'); setTimeout(()=>btn.classList.remove('flash'), 220); };

    const playSequence = () => {
      playing = true;
      let i = 0;
      const interval = setInterval(() => {
        const val = memSeq[i];
        const btn = document.querySelector(`.mem[data-val="${val}"]`);
        if (btn) flash(btn);
        i++;
        if (i >= memSeq.length) { clearInterval(interval); playing = false; playerSeq = []; }
      }, 420);
    };
    const nextRound = () => { memSeq.push(Math.floor(Math.random()*memBtns.length)); playSequence(); };

    onceWire(startBtn, 'startMem', () => {
      startBtn.addEventListener('click', () => { memSeq = []; playerSeq = []; nextRound(); });
    });

    memBtns.forEach(btn => {
      onceWire(btn, 'memBtn', () => {
        btn.addEventListener('click', () => {
          if (playing || memSeq.length === 0) return;
          const val = parseInt(btn.dataset.val, 10);
          playerSeq.push(val); flash(btn);
          // prefix check
          for (let i=0;i<playerSeq.length;i++){
            if (playerSeq[i] !== memSeq[i]) { playerSeq = []; playSequence(); return; }
          }
          if (playerSeq.length === memSeq.length){
            if (memSeq.length >= 4){
              keys.S = true;
              const el = $('runeS'); if(el) el.style.display = 'block';
              pulseCube(); checkCubeUnlock();
            } else nextRound();
          }
        });
      });
    });
  }

  /* ---------- Math (original target 15) ---------- */
  const mathNums = [...document.querySelectorAll('#mathGrid .num')];
  if (mathNums.length){
    let sel = [];
    mathNums.forEach(btn => {
      onceWire(btn, 'math', () => {
        btn.addEventListener('click', () => {
          btn.classList.toggle('sel');
          const val = parseInt(btn.textContent.trim(), 10);
          if (btn.classList.contains('sel')) sel.push(val); else sel = sel.filter(v => v !== val);
          const sum = sel.reduce((a,b)=>a+b, 0);
          if (sum === 15){
            if (!keys.N){
              keys.N = true;
              const el = $('runeN'); if(el) el.style.display = 'block';
              pulseCube(); checkCubeUnlock();
            }
          } else if (sum > 15) {
            mathNums.forEach(n => n.classList.remove('sel'));
            sel = [];
          }
        });
      });
    });
  }

  /* Finalize wiring state and reset visuals per original flow */
  puzzleInitDone = true;
  resetPuzzleState();
  shrinkPuzzleBox();
}

/* Expose init for quick test */
window.initPuzzleBox = initPuzzleBox_originalLayout;

/* DOM-ready guard: attach the "Attempt Puzzle" button and ensure init when panel opens */
document.addEventListener('DOMContentLoaded', () => {
  // attemptPuzzleBtn should show puzzle box panel and call init
  const attemptBtn = $('attemptPuzzleBtn');
  if (attemptBtn) onceWire(attemptBtn, 'attemptPuzzle', () => {
    attemptBtn.addEventListener('click', () => {
      hidePanel('mysteryBoxChamber'); showPanel('puzzleBoxPanel'); initPuzzleBox_originalLayout();
    });
  });

  // if panel is already visible on load, init right away
  const pb = $('puzzleBoxPanel');
  if (pb && pb.style.display === 'block') initPuzzleBox_originalLayout();
});


/* Final branch -> Final clearance -> Superform */
document.getElementById('toFinalClearanceBtn')?.addEventListener('click', () => {
  hidePanel('finalBranchPanel'); showPanel('finalClearancePanel');
});
document.getElementById('finalClearanceBtn')?.addEventListener('click', ()=>{
  const code = document.getElementById('finalClearanceCode').value.trim();
  const revealed = document.getElementById('revealedPassword').textContent.trim();
  const status = document.getElementById('finalClearanceStatus');
  if (code === revealed) {
    status.textContent = "‚úÖ Clearance accepted. Superform unlocked.";
    setTimeout(()=>{ hidePanel('finalClearancePanel'); showPanel('mysteryBoxPanel'); document.getElementById('superName').value = ceremonyName; }, 800);
  } else status.textContent = "‚ùå Incorrect code.";
});

/* Superform submit (unified) */
function submitSuperForm() {
  const code = document.getElementById("superCode").value.trim();
  if (code !== "TRIUMPH-777") { alert("Invalid super-level clearance code."); return false; }
  const name = document.getElementById("superName").value.trim();
  const tier = document.getElementById("superTier").value;
  const card = generateCardID();
  const accessCode = generateAccessCode();
  const clearanceCode = code;

  const messageForBlogger = `üëë Super-Level Access Submission
üë§ Name: ${name}
üéñ Tier: ${tier}
üÜî Account ID: ${card}
üîë Access Code: ${accessCode}`.trim();

  const plaqueMessage = `üëë Super-Level Access Submission
üë§ Name: ${name}
üéñ Tier: ${tier}
üÜî Account ID: ${card}`.trim();

  const redirectURL = `https://mrhim00.blogspot.com/2025/10/issued.html?card=${encodeURIComponent(card)}`;

  submitToBlogger({ name, phone:'', messageForBlogger, plaqueMessage, clearanceCode, accessCode, redirectURL });
  alert("Super-level form submitted. Redirecting...");
  return false;
}
document.getElementById('superLevelForm')?.addEventListener('submit', (e)=>{ e.preventDefault(); submitSuperForm(); });

/* Cube rotation (binding) */

    // Interactive rotation for the Labyrinth Cube
    const cubeEl = document.getElementById('labyrinthCube');
    let dragging = false, startX = 0, startY = 0, rotX = -15, rotY = 20;
    function updateRotation() { cubeEl.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`; }
    cubeEl.addEventListener('mousedown', e => { dragging = true; startX = e.clientX; startY = e.clientY; });
    window.addEventListener('mousemove', e => {
      if (!dragging) return;
      const dx = e.clientX - startX, dy = e.clientY - startY;
      startX = e.clientX; startY = e.clientY;
      rotY += dx * 0.4; rotX -= dy * 0.4; updateRotation();
    });
    window.addEventListener('mouseup', () => dragging = false);
    cubeEl.addEventListener('touchstart', e => { dragging = true; startX = e.touches[0].clientX; startY = e.touches[0].clientY; }, { passive: true });
    cubeEl.addEventListener('touchmove', e => {
      if (!dragging) return;
      const dx = e.touches[0].clientX - startX, dy = e.touches[0].clientY - startY;
      startX = e.touches[0].clientX; startY = e.touches[0].clientY;
      rotY += dx * 0.4; rotX -= dy * 0.4; updateRotation();
    }, { passive: true });
    cubeEl.addEventListener('touchend', () => dragging = false);
    updateRotation();
  
  
/* Keyboard shortcuts */
document.addEventListener("keydown", function (e) {
  if (e.ctrlKey && e.altKey && e.key.toLowerCase() === "q") {
    const superPanel = document.getElementById("mysteryBoxPanel");
    if (superPanel) { superPanel.style.display = "block"; alert("Super-level access form unlocked."); }
  }
  if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'a') {
    const f=document.getElementById('adminForm'); if(f){ f.style.display='block'; alert("Admin access form unlocked."); }
  }
});

/* Public form: generator hook */
document.getElementById('love-form')?.addEventListener('click', (e)=>{
  if (e.target && e.target.id === 'genNameBtn') generateNameFromTier();
});

/* Ensure ritual controls are wired on pageshow (bfcache restores) */
window.addEventListener('pageshow', ()=>{
  const colorPanel = document.getElementById('colorPanel');
  if (!colorPanel) return;
  const verifyBtn = colorPanel.querySelector('.ritual-controls button:nth-child(1)');
  const clearBtn  = colorPanel.querySelector('.ritual-controls button:nth-child(2)');
  if (verifyBtn && !verifyBtn.dataset.wired) { verifyBtn.dataset.wired = '1'; verifyBtn.addEventListener('click', verifySequenceAttempt); }
  if (clearBtn && !clearBtn.dataset.wired) { clearBtn.dataset.wired = '1'; clearBtn.addEventListener('click', clearSequence); }
});

/* Small convenience: wire initial admin tap zones if present */
(function bindAdminVisibilityShortcuts(){
  const adminForm = document.getElementById('adminForm');
  const zoneRight = document.getElementById('tapTopRight');
  if (zoneRight && adminForm) zoneRight.addEventListener('click', ()=> { adminForm.style.display = 'block'; });
})();

/* End of merged script */
  
  

    </script>



</body>
</html>
