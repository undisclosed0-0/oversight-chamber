<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Oversight Chamber — Ceremonial Entry</title>

<style>
  :root {
    --gold:#ffd700; --violet:#6a0dad; --iron:#222; --obsidian:#000;
    --ink:#111; --panel-bg: radial-gradient(circle at center, #1a1a1a 0%, #0d0d0d 100%);
  }
  body {
    margin:0; background: radial-gradient(1200px 600px at 50% 0%, #0b0b0b 0%, #000 60%);
    color: var(--gold); font-family: 'Orbitron','Courier New', monospace;
  }
  .container { max-width: 920px; margin: 40px auto; padding: 0 20px; }

  /* Panel shells */
  .panel-shell {
    background: var(--panel-bg);
    border: 3px solid #444; border-radius: 12px;
    box-shadow: inset 0 0 25px rgba(0,0,0,0.8), 0 0 20px rgba(255,215,0,0.18);
    padding: 20px; margin-top: 20px;
  }
  h1 { text-align:center; letter-spacing:1px; }
  h2, h3 { color: var(--gold); text-transform:uppercase; text-shadow: 0 0 8px rgba(255,215,0,0.6); margin: 0 0 12px 0; }

  /* Centerpiece main form */
  #mainFormPanel .crest-header {
    width: 96px; height: 96px; margin: 0 auto 16px; border-radius: 50%;
    box-shadow: 0 0 20px rgba(194,167,109,0.6);
    background: radial-gradient(circle, rgba(255,215,0,0.18), rgba(106,13,173,0.15));
  }
  #mainFormPanel label { display:block; margin-top: 12px; font-weight:700; }
  #mainFormPanel input, #mainFormPanel select, #mainFormPanel textarea {
    width:100%; margin-top:8px; padding:10px; border-radius:6px;
    border:2px solid #333; background:#111; color:var(--gold); font-weight:bold;
    box-shadow: inset 0 0 6px rgba(0,0,0,0.7);
  }
  #mainFormPanel button {
    margin-top: 15px; padding:10px 20px; border-radius:8px; border:2px solid var(--iron);
    background: linear-gradient(var(--gold), #b8860b); color:#111; font-weight:bold; text-transform:uppercase; cursor:pointer;
    box-shadow: 0 0 10px rgba(255,215,0,0.5);
    transition: transform 0.15s ease, box-shadow 0.3s ease;
  }
  #mainFormPanel button:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(255,215,0,0.8); }

  /* Tap access */
  .tap-shimmer { position: fixed; inset: 0; pointer-events:none; z-index: 998;
    background:
      radial-gradient(120px 120px at 32px 32px, rgba(255,215,0,0.25), transparent 70%),
      radial-gradient(120px 120px at calc(100% - 32px) 32px, rgba(138,43,226,0.22), transparent 70%);
    opacity:0; transition: opacity 260ms ease;
  }
  .tap-shimmer.active { opacity:1; }
  .tap-zone { position: fixed; width:64px; height:64px; top:0; z-index:999; }
  #tapTopLeft { left:0; } #tapTopRight { right:0; }

  /* Admin form (hidden scaffolding) */
  #adminForm { display:none; }
  #adminForm label { display:block; margin-top: 10px; font-weight:700; }
  #adminForm input, #adminForm select {
    width:100%; margin-top:8px; padding:10px; border-radius:6px;
    border:2px solid #333; background:#111; color:var(--gold); font-weight:bold;
    box-shadow: inset 0 0 6px rgba(0,0,0,0.7);
  }
  #verifyTierBtn {
    background: linear-gradient(var(--gold), #b8860b); border: 2px solid var(--iron);
    border-radius: 8px; padding: 10px 20px; font-weight: 700; text-transform: uppercase; cursor: pointer; color: #111;
    text-shadow: 0 0 4px rgba(255,255,255,0.6);
    box-shadow: 0 0 10px rgba(255,215,0,0.5);
    transition: transform 0.15s ease, box-shadow 0.3s ease;
  }
  #verifyTierBtn:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(255,215,0,0.8); }

  /* Ritual panel (single instance) */
  #colorPanel { display:none; position:relative; }
  #panelButtons { display:grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 12px; }
  .panel-btn {
    padding: 16px; border-radius:10px; border:2px solid var(--iron);
    font-family:'Courier New', monospace; font-size:1.1em; font-weight:700; color:#fdfdfd; cursor:pointer;
    text-shadow: 0 0 6px rgba(255,255,255,0.6), 0 0 12px rgba(255,215,0,0.8);
    box-shadow: inset 0 0 12px rgba(0,0,0,0.7), 0 0 10px rgba(255,215,0,0.28);
    transition: transform 0.15s ease, box-shadow 0.3s ease, filter 0.2s ease;
    animation: runePulse 3s infinite;
  }
  .panel-btn:active { transform: scale(0.96); box-shadow: inset 0 0 14px rgba(0,0,0,0.9), 0 0 6px rgba(255,215,0,0.5); }
  @keyframes runePulse { 0%,100%{ text-shadow:0 0 6px rgba(255,255,255,0.6); filter:brightness(1); } 50%{ text-shadow:0 0 14px rgba(255,215,0,1); filter:brightness(1.15);} }
  .panel-btn[data-color="crimson"]   { background: linear-gradient(#7a2b2b, #3a0d0d); }
  .panel-btn[data-color="violet"]    { background: linear-gradient(#5a2b7a, #2a0d3a); }
  .panel-btn[data-color="emerald"]   { background: linear-gradient(#2b7a3f, #0d3a1a); }
  .panel-btn[data-color="amber"]     { background: linear-gradient(#7a6f2b, #3a2f0d); }
  .panel-btn[data-color="azure"]     { background: linear-gradient(#2b3f7a, #0d1a3a); }
  .panel-btn[data-color="iron"]      { background: linear-gradient(#555, #222); }
  .panel-btn[data-color="gold"]      { background: linear-gradient(#ffd700, #b8860b); color:#222; }
  .panel-btn[data-color="moss"]      { background: linear-gradient(#556b2f, #2a3a1a); }
  .panel-btn[data-color="obsidian"]  { background: linear-gradient(#1c1c1c, #000); }

  /* Access keypad (normal path) */
  #superCodePanel { display:none; position:relative; }
  .panel-sigil {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:6em; color:rgba(255,215,0,0.08); text-shadow:0 0 15px rgba(255,215,0,0.2); pointer-events:none; z-index:0;
  }
  #superCodePanel .panel-content { position:relative; z-index:1; }
  #superCodePanel input { width:100%; margin-top:8px; padding:10px; border-radius:6px; border:2px solid #333; background:#111; color:var(--gold); font-weight:bold; }
  #superCodePanel button {
    margin-top: 10px; padding: 10px 20px; border-radius: 8px; border: 2px solid var(--iron);
    background: linear-gradient(var(--gold), #b8860b); color: #111; font-weight: bold; text-transform: uppercase; cursor: pointer;
    box-shadow: 0 0 10px rgba(255,215,0,0.5);
  }

  /* Puzzle Box (intermediate normal branch) */
  #puzzleBoxPanel { display:none; }
  .cube-container { display:flex; justify-content:center; margin: 16px 0; }
  .glowing-cube { width:120px; height:120px; background: linear-gradient(145deg, #6a0dad, #ffd700); border-radius:12px;
    box-shadow:0 0 20px rgba(106,13,173,0.8), 0 0 40px rgba(255,215,0,0.6); animation: cubeGlow 3s infinite alternate;
  }
  @keyframes cubeGlow {
    0% { transform: rotateY(0deg) rotateX(0deg); box-shadow:0 0 20px rgba(106,13,173,0.8); }
    50%{ transform: rotateY(180deg) rotateX(20deg); box-shadow:0 0 40px rgba(255,215,0,0.8); }
    100%{ transform: rotateY(360deg) rotateX(0deg); box-shadow:0 0 20px rgba(106,13,173,0.8); }
  }
  #puzzleBoxPanel input, #puzzleBoxPanel button {
    width:100%; margin-top:8px; padding:10px; border-radius:6px; border:2px solid #333; background:#111; color:var(--gold); font-weight:bold;
  }

  /* Final Clearance (Qube) before Superform */
  #finalClearancePanel { display:none; }
  #finalClearancePanel input, #finalClearancePanel button {
    width:100%; margin-top:8px; padding:10px; border-radius:6px; border:2px solid #333; background:#111; color:var(--gold); font-weight:bold;
  }

  /* Superform chamber */
  #mysteryBoxPanel { display:none; border: 3px solid var(--violet);
    box-shadow: inset 0 0 25px rgba(0,0,0,0.8), 0 0 20px rgba(138,43,226,0.6);
    color: #e0dfff; text-align:center; position:relative; overflow:hidden;
  }
  .mystery-title { margin-bottom:12px; }
  .mystery-crest { font-size:2em; margin-bottom:16px; text-shadow: 0 0 12px rgba(255,215,0,0.8); }
  .cube-aura { position:absolute; inset:0; pointer-events:none; z-index:0;
    background:
      radial-gradient(180px 180px at 30% 40%, rgba(106,13,173,0.25), transparent 70%),
      radial-gradient(220px 220px at 70% 60%, rgba(255,215,0,0.18), transparent 70%);
    animation: auraPulse 5s ease-in-out infinite;
  }
  @keyframes auraPulse { 0%,100%{ filter:saturate(1); opacity:0.75; } 50%{ filter:saturate(1.3); opacity:1; } }
  #superLevelForm input, #superLevelForm select {
    width:80%; margin:10px auto; padding:10px; border-radius:6px; border:2px solid #444; background:#111; color:var(--gold); font-weight:bold;
    box-shadow: inset 0 0 6px rgba(0,0,0,0.7);
  }
  #superLevelForm button {
    margin-top:15px; padding:10px 20px; border-radius:8px; border:2px solid var(--iron);
    background: linear-gradient(var(--gold), #b8860b); color:#111; font-weight:bold; text-transform:uppercase; cursor:pointer;
    box-shadow: 0 0 10px rgba(255,215,0,0.5); transition: transform 0.15s ease, box-shadow 0.3s ease;
  }
  #superLevelForm button:hover { transform:scale(1.05); box-shadow:0 0 15px rgba(255,215,0,0.8); }

  /* Utility hide */
  .hide { display:none !important; }

  /* Responsive tweaks */
  @media (max-width: 480px) {
    .container { padding: 0 12px; }
    h1 { font-size: 1.35em; }
    #superLevelForm input, #superLevelForm select { width: 92%; }
  }
</style>
</head>
<body>
<div class="container">

  <!-- Centerpiece main form with tap entry -->
  <div id="mainFormPanel" class="panel-shell">
    <div class="crest-header"></div>
    <h1>Oversight Entry</h1>

    <label for="role">Select Tier</label>
    <select id="role" required>
      <option value="">Select your role</option>
      <option value="Initiate">Initiate</option>
      <option value="Steward">Steward</option>
      <option value="Neighbor">Neighbor</option>
      <option value="Contributor">Contributor</option>
      <option value="Observer">Observer</option>
      <option value="Supporter">Supporter</option>
      <option value="Archivist">Archivist</option>
    </select>

    <button type="button" id="genNameBtn">Generate Prestige Name</button>
    <input type="text" id="name" placeholder="e.g., Solenne of the Third Tier" required>
    <label for="phone">Contact Number</label>
    <input type="tel" id="phone" placeholder="e.g., +1 616-555-1234" required>
    <p id="tapHint">Tap top-left then top-right to unlock Admin gate.</p>
  </div>

  <!-- Hidden Admin Form (unlocked by tap sequence) -->
  <form id="adminForm" class="panel-shell" onsubmit="return false;">
    <h2>Admin Access</h2>
    <label for="adminTier">Tier</label>
    <select id="adminTier" name="adminTier" required>
      <option value="Admin">Admin</option>
      <option value="MasterAdmin">Master Admin</option>
    </select>
    <label for="adminCode">Clearance Code</label>
    <input id="adminCode" name="adminCode" required type="password" />
    <button type="button" id="verifyTierBtn">Verify</button>
    <p id="verifyStatus"></p>
  </form>

  <!-- Ritual panel: single instance -->
  <div id="colorPanel" class="panel-shell">
    <h3>Ritual Sequence</h3>
    <p>Designation: <strong id="nameInRitual"></strong></p>
    <div id="panelButtons"></div>
    <p id="colorStatus"></p>
  </div>

  <!-- Access keypad (normal path only) -->
  <div id="superCodePanel" class="panel-shell">
    <h3>Access Panel</h3>
    <div class="panel-sigil">♛</div>
    <div class="panel-content">
      <p>Rune keypad unlocked. Enter access code to proceed.</p>
      <input id="accessCodeInput" type="text" placeholder="Enter code (X-719-BOX)">
      <button id="accessCodeBtn">Verify Code</button>
      <p id="accessCodeStatus"></p>
    </div>
  </div>

  <!-- Puzzle Box (normal branch intermediary) -->
  <div id="puzzleBoxPanel" class="panel-shell">
    <h2 class="mystery-title">Puzzle Box Mechanism</h2>
    <p>Designation: <strong id="nameInPuzzle"></strong></p>
    <div class="cube-container"><div class="glowing-cube"></div></div>
    <p>Enter the final clearance code to unlock the Superform.</p>
    <input id="puzzleBoxCode" type="password" placeholder="Enter final code (FINAL-CLEARANCE-999)">
    <button id="puzzleBoxUnlockBtn">Unlock</button>
    <p id="puzzleStatus"></p>
  </div>

  <!-- Final Clearance (Qube) — last stop before Superform -->
  <div id="finalClearancePanel" class="panel-shell">
    <h2>Final Clearance</h2>
    <p>Designation: <strong id="nameInFinalClear"></strong></p>
    <p>Your final password is: <strong id="revealedPassword">QUBE-ACCESS-777</strong></p>
    <input id="finalClearanceCode" type="password" placeholder="Re-enter final cube code">
    <button id="finalClearanceBtn">Unlock Superform</button>
    <p id="finalClearanceStatus"></p>
  </div>

  <!-- Superform chamber -->
  <div id="mysteryBoxPanel" class="panel-shell">
    <h2 class="mystery-title">Super Level Access</h2>
    <div class="mystery-crest">♛ ⚚ ⟁</div>
    <div class="cube-aura"></div>
    <form id="superLevelForm">
      <label for="superName">Account Holder</label>
      <input id="superName" name="superName" required type="text" />
      <label for="superTier">Tier</label>
      <select id="superTier" name="superTier" required>
        <option value="Sovereign">Sovereign</option>
        <option value="Luminary">Luminary</option>
        <option value="Legacy">Legacy Tier</option>
      </select>
      <label for="superCode">Clearance Code</label>
      <input id="superCode" name="superCode" required type="password" />
      <button type="submit">Submit Super-Level Form</button>
      <p id="superFormStatus"></p>
    </form>
  </div>

</div>

<!-- Mobile shimmer + tap zones -->
<div class="tap-shimmer" id="tapShimmer"></div>
<div id="tapTopLeft" class="tap-zone" aria-hidden="true"></div>
<div id="tapTopRight" class="tap-zone" aria-hidden="true"></div>

<script>
  /* State */
  let adminGateUnlocked = false;
  let hiddenPath = false;
  let ceremonyName = "";
  let superSequence = [];

  const TIER_CODES = { Admin: "A-231-GATE", MasterAdmin: "M-Q8/-CROWN" };
  const HIDDEN_CODE = "X-719-BOX";

  /* Helpers */
  function showPanel(id){ const el = document.getElementById(id); if(el) el.style.display='block'; }
  function hidePanel(id){ const el = document.getElementById(id); if(el) el.style.display='none'; }
  let shimmerTimer;
  function shimmerPulse(){ const s=document.getElementById('tapShimmer'); s.classList.add('active'); clearTimeout(shimmerTimer); shimmerTimer=setTimeout(()=>s.classList.remove('active'),260); }

  /* Generated ceremonial names */
  function generateTieredName(tier) {
    const pools = {
      Initiate:   { names:["Lena","Jamal","Sofia","Kai","Maya"],     suffixes:["of the Welcome Ledger","of the First Entry","of the Community Fold"] },
      Steward:    { names:["Elias","Priya","Malcolm","Zara","Omar"], suffixes:["of the Civic Watch","of the Shared Archive","of the Stewardship Line"] },
      Neighbor:   { names:["Ava","Noah","Grace","Leo","Isla"],       suffixes:["of the Local Registry","of the Neighborhood Tier","of the Common Fold"] },
      Contributor:{ names:["Milan","Tessa","Jude","Nina","Arlo"],    suffixes:["of the Support Ledger","of the Contributor Line","of the Community Archive"] },
      Observer:   { names:["Theo","Luna","Miles","Ivy","Rowan"],     suffixes:["of the Quiet Watch","of the Passive Tier","of the Ledger Periphery"] },
      Supporter:  { names:["Elena","Caleb","Raya","Finn","Naomi"],   suffixes:["of the Advocacy Fold","of the Support Tier","of the Donor Registry"] },
      Archivist:  { names:["Solenne","Idris","Helena","Lucan","Amara"], suffixes:["of the Memory Vault","of the Archivist Line","of the Tiered Archive"] }
    };
    const pool = pools[tier]; if (!pool) return "Unnamed of the Unknown Tier";
    const name = pool.names[Math.floor(Math.random()*pool.names.length)];
    const suffix = pool.suffixes[Math.floor(Math.random()*pool.suffixes.length)];
    return `${name} ${suffix}`;
  }
  function propagateName(panelIdList){
    panelIdList.forEach(id=>{
      const el = document.getElementById(id);
      if(el) el.textContent = ceremonyName;
    });
  }

  /* Mainform: generate name */
  document.getElementById('genNameBtn').addEventListener('click', ()=>{
    const tier = document.getElementById('role').value;
    if(!tier){ alert("Please select a tier first."); return; }
    const generated = generateTieredName(tier);
    document.getElementById('name').value = generated;
  });

  /* Tap unlock: top-left then top-right to reveal Admin form */
  let adminTapSequence = [];
  let adminTapResetTimer;
  function resetAdminTap(){ adminTapSequence=[]; clearTimeout(adminTapResetTimer); }
  function checkAdminMobileUnlock(){
    const correct = ['tapTopLeft','tapTopRight'];
    if (adminTapSequence.join(',') === correct.join(',')) {
      adminGateUnlocked = true;
      showPanel('adminForm'); shimmerPulse(); resetAdminTap();
      document.getElementById('tapHint').textContent = "Admin gate unlocked. Verify your tier.";
    } else {
      adminTapResetTimer = setTimeout(resetAdminTap, 8000);
    }
  }
  document.getElementById('tapTopLeft').addEventListener('click', ()=>{ adminTapSequence.push('tapTopLeft'); shimmerPulse(); checkAdminMobileUnlock(); });
  document.getElementById('tapTopRight').addEventListener('click', ()=>{ adminTapSequence.push('tapTopRight'); shimmerPulse(); checkAdminMobileUnlock(); });

  /* Admin verify → show ritual panel (single instance) */
  document.getElementById('verifyTierBtn').addEventListener('click', ()=>{
    if (!adminGateUnlocked) { alert('Tap access required. Complete the tap unlock first.'); return; }
    const tierSel = document.getElementById('adminTier').value;
    const code = document.getElementById('adminCode').value.trim();
    const status = document.getElementById('verifyStatus');
    if (!code){ status.textContent = "Enter clearance code."; return; }

    // Reset downstream panels
    hidePanel('colorPanel'); hidePanel('superCodePanel'); hidePanel('puzzleBoxPanel'); hidePanel('finalClearancePanel'); hidePanel('mysteryBoxPanel');

    if ((tierSel === 'Admin' && code === TIER_CODES.Admin) || (tierSel === 'MasterAdmin' && code === TIER_CODES.MasterAdmin)) {
      hiddenPath = false;
      // Build designation from main form tier for continuity
      const role = document.getElementById('role').value || 'Initiate';
      ceremonyName = generateTieredName(role);
      status.textContent = "✅ Verified. Proceed to the ritual.";
      document.getElementById('nameInRitual').textContent = ceremonyName;
      superSequence = [];
      showPanel('colorPanel');
      buildRitualGrid();
    } else if (code === HIDDEN_CODE) {
      hiddenPath = true;
      const role = document.getElementById('role').value || 'Initiate';
      ceremonyName = generateTieredName(role);
      status.textContent = "✅ Hidden path acknowledged. Proceed to the ritual.";
      document.getElementById('nameInRitual').textContent = ceremonyName;
      superSequence = [];
      showPanel('colorPanel');
      buildRitualGrid();
    } else {
      status.textContent = "❌ Invalid clearance for selected tier.";
    }
  });

  /* Ritual grid */
  function buildRitualGrid(){
    const panel = document.getElementById('panelButtons');
    panel.innerHTML = "";
    const colors = [
      {name:"crimson",  bg:"crimson"}, {name:"violet",   bg:"rebeccapurple"},
      {name:"emerald",  bg:"seagreen"}, {name:"amber",    bg:"goldenrod"},
      {name:"azure",    bg:"royalblue"}, {name:"iron",     bg:"dimgray"},
      {name:"gold",     bg:"gold"},      {name:"moss",     bg:"darkolivegreen"},
      {name:"obsidian", bg:"black"}
    ];
    const glyphs = ["⟟","Ϟ","⟁","⧖","ᚠ","ζ","₣","⟊","⚚","♛","⧫"];
    const numbers = ["231","85/","V2ζ","₣2","77X","9Ø","31Δ","8.98","27$","719"];
    colors.forEach(c=>{
      const btn = document.createElement('button');
      btn.type = "button"; btn.className = "panel-btn"; btn.dataset.color = c.name;
      btn.style.background = c.bg; btn.style.color = "#fff";
      const g1=glyphs[Math.floor(Math.random()*glyphs.length)];
      const g2=glyphs[Math.floor(Math.random()*glyphs.length)];
      const num=numbers[Math.floor(Math.random()*numbers.length)];
      btn.textContent = `${g1}${g2} ${num}`;
      btn.addEventListener('click', ()=>handleRitualTap(c.name));
      panel.appendChild(btn);
    });
  }
  const requiredSequence = ['crimson','violet','emerald','amber','azure','iron','gold','moss','obsidian'];
  function handleRitualTap(color){
    superSequence.push(color); shimmerPulse();
    if (superSequence.length === requiredSequence.length) {
      const correct = superSequence.join(',') === requiredSequence.join(',');
      superSequence = [];
      if (!correct) {
        document.getElementById('colorStatus').textContent = "❌ Incorrect sequence. Re-enter clearance and try again.";
        hidePanel('colorPanel'); return;
      }
      hidePanel('colorPanel');
      if (hiddenPath) {
        // Hidden branch goes directly to Puzzle Box per your model
        propagateName(['nameInPuzzle','nameInFinalClear','superName']); // carry designation
        showPanel('puzzleBoxPanel');
      } else {
        // Normal branch shows Access keypad first
        document.getElementById('accessCodeStatus').textContent = "";
        propagateName(['nameInPuzzle','nameInFinalClear','superName']);
        showPanel('superCodePanel');
      }
    }
  }

  /* Access keypad (normal path → Puzzle Box) */
  document.getElementById('accessCodeBtn').addEventListener('click', ()=>{
    const input = document.getElementById('accessCodeInput').value.trim();
    const status = document.getElementById('accessCodeStatus');
    if (input === 'X-719-BOX') {
      status.textContent = "✅ Code accepted. Proceeding to Puzzle Box...";
      setTimeout(()=>{ hidePanel('superCodePanel'); showPanel('puzzleBoxPanel'); }, 800);
    } else {
      status.textContent = "❌ Incorrect code. Try again.";
    }
  });

  /* Puzzle Box → final clearance (Qube) */
  document.getElementById('puzzleBoxUnlockBtn').addEventListener('click', ()=>{
    const code = document.getElementById('puzzleBoxCode').value.trim();
    const status = document.getElementById('puzzleStatus');
    if (code === 'FINAL-CLEARANCE-999') {
      status.textContent = "✅ Final clearance code accepted. Proceed to Qube.";
      setTimeout(()=>{ hidePanel('puzzleBoxPanel'); showPanel('finalClearancePanel'); }, 800);
    } else {
      status.textContent = "❌ Incorrect final code. Try again.";
    }
  });

  /* Final Clearance → Superform */
  document.getElementById('finalClearanceBtn').addEventListener('click', ()=>{
    const code = document.getElementById('finalClearanceCode').value.trim();
    const revealed = document.getElementById('revealedPassword').textContent.trim();
    const status = document.getElementById('finalClearanceStatus');
    if (code === revealed) {
      status.textContent = "✅ Clearance accepted. Superform unlocked.";
      setTimeout(()=>{
        hidePanel('finalClearancePanel');
        showPanel('mysteryBoxPanel');
        // carry designation into Superform
        document.getElementById('superName').value = ceremonyName;
      }, 800);
    } else {
      status.textContent = "❌ Incorrect code.";
    }
  });

  /* Superform submit (ceremonial completion) */
  document.getElementById('superLevelForm').addEventListener('submit', (e)=>{
    e.preventDefault();
    document.getElementById('superFormStatus').textContent = "✨ Super-Level Form submitted successfully.";
  });

  /* Initial visibility: only centerpiece main form is visible */
  window.addEventListener('DOMContentLoaded', ()=>{
    showPanel('mainFormPanel');
    hidePanel('adminForm'); hidePanel('colorPanel'); hidePanel('superCodePanel');
    hidePanel('puzzleBoxPanel'); hidePanel('finalClearancePanel'); hidePanel('mysteryBoxPanel');
  });
</script>
</body>
</html>
